<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>studio ain - 인플루언서와 함께 찍는 온라인 AI 네컷사진</title>
    <style>
      /* Noto Sans KR Font Faces */
      @font-face {
        font-family: "Noto Sans KR";
        font-style: normal;
        font-weight: 100;
        font-display: swap;
        src: url("./fonts/Noto_Sans_KR/static/NotoSansKR-Thin.ttf")
          format("truetype");
      }
      @font-face {
        font-family: "Noto Sans KR";
        font-style: normal;
        font-weight: 200;
        font-display: swap;
        src: url("./fonts/Noto_Sans_KR/static/NotoSansKR-ExtraLight.ttf")
          format("truetype");
      }
      @font-face {
        font-family: "Noto Sans KR";
        font-style: normal;
        font-weight: 300;
        font-display: swap;
        src: url("./fonts/Noto_Sans_KR/static/NotoSansKR-Light.ttf")
          format("truetype");
      }
      @font-face {
        font-family: "Noto Sans KR";
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url("./fonts/Noto_Sans_KR/static/NotoSansKR-Regular.ttf")
          format("truetype");
      }
      @font-face {
        font-family: "Noto Sans KR";
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url("./fonts/Noto_Sans_KR/static/NotoSansKR-Medium.ttf")
          format("truetype");
      }
      @font-face {
        font-family: "Noto Sans KR";
        font-style: normal;
        font-weight: 600;
        font-display: swap;
        src: url("./fonts/Noto_Sans_KR/static/NotoSansKR-SemiBold.ttf")
          format("truetype");
      }
      @font-face {
        font-family: "Noto Sans KR";
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url("./fonts/Noto_Sans_KR/static/NotoSansKR-Bold.ttf")
          format("truetype");
      }
      @font-face {
        font-family: "Noto Sans KR";
        font-style: normal;
        font-weight: 800;
        font-display: swap;
        src: url("./fonts/Noto_Sans_KR/static/NotoSansKR-ExtraBold.ttf")
          format("truetype");
      }
      @font-face {
        font-family: "Noto Sans KR";
        font-style: normal;
        font-weight: 900;
        font-display: swap;
        src: url("./fonts/Noto_Sans_KR/static/NotoSansKR-Black.ttf")
          format("truetype");
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Noto Sans KR", -apple-system, BlinkMacSystemFont,
          "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        background: #f6f7f9;
        min-height: 100vh;
        line-height: 1.6;
        color: #606060;
        margin: 0;
        padding: 0;
        font-weight: 400;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .app-header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 70px;
        background: #ffffff;
        border-bottom: 1px solid #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 40px;
        z-index: 1000;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .app-logo {
        font-size: 1.75rem;
        font-weight: 700;
        color: #1f2937;
        letter-spacing: -0.025em;
      }

      .user-type-toggle {
        display: flex;
        align-items: center;
        background: #f3f4f6;
        border-radius: 50px;
        padding: 6px;
        position: relative;
        width: 200px;
        height: 44px;
      }

      .toggle-switch {
        position: absolute;
        width: 92px;
        height: 32px;
        background: #3b82f6;
        border-radius: 26px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
        left: 6px;
      }

      .toggle-switch.customer {
        left: 102px;
      }

      .toggle-option {
        flex: 1;
        text-align: center;
        font-size: 0.85rem;
        font-weight: 500;
        padding: 8px 12px;
        cursor: pointer;
        transition: color 0.3s ease;
        position: relative;
        z-index: 2;
      }

      .toggle-option.active {
        color: white;
      }

      .toggle-option.inactive {
        color: #6b7280;
      }

      .container {
        min-height: 100vh;
        padding-top: 70px;
        width: 100%;
        max-width: 1440px;
        margin: 0 auto;
        background: transparent;
        position: relative;
      }

      .main-content {
        padding: 80px 32px 60px;
        max-width: 1200px;
        margin: 0 auto;
        position: relative;
        text-align: center;
      }

      .main-content::before {
        display: none;
      }

      .logo {
        font-size: 3.2rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 24px;
        letter-spacing: -0.025em;
      }

      .subtitle {
        color: #6b7280;
        font-size: 1.125rem;
        font-weight: 400;
        margin-bottom: 64px;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      .options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 24px;
        margin-top: 32px;
      }

      .option-card {
        background: #ffffff;
        border: 1px solid #e5e7eb;
        border-radius: 16px;
        padding: 48px 32px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        color: inherit;
        position: relative;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        opacity: 0;
      }

      .option-card::before {
        display: none;
      }

      .option-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        border-color: #3b82f6;
      }

      .option-card:hover::before {
        opacity: 1;
      }

      .option-icon {
        font-size: 3rem;
        margin-bottom: 24px;
        display: block;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }

      .option-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 16px;
        color: #1f2937;
        letter-spacing: -0.025em;
      }

      .option-desc {
        color: #6b7280;
        font-size: 1rem;
        line-height: 1.6;
        font-weight: 400;
      }

      .hidden {
        display: none;
      }

      .back-btn {
        background: #f9fafb;
        color: #6b7280;
        border: 1px solid #e5e7eb;
        padding: 12px 20px;
        border-radius: 8px;
        cursor: pointer;
        margin-bottom: 32px;
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .back-btn:hover {
        background: #f3f4f6;
        border-color: #d1d5db;
      }

      .form-container {
        text-align: left;
        margin-top: 40px;
      }

      .form-group {
        margin-bottom: 24px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #4a5568;
        font-size: 0.95rem;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 16px 20px;
        border: 1.5px solid #e2e8f0;
        border-radius: 12px;
        font-size: 1rem;
        background: rgba(255, 255, 255, 0.8);
        transition: all 0.2s ease;
        font-family: inherit;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #3b82f6;
        background: rgba(255, 255, 255, 1);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .btn {
        background: #3b82f6;
        color: white;
        border: none;
        padding: 16px 24px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        width: 100%;
        margin-top: 24px;
        transition: all 0.2s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        letter-spacing: -0.01em;
      }

      .btn:hover {
        background: #2563eb;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
      }

      .btn:disabled {
        background: #d1d5db;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .template-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 24px;
        margin-top: 32px;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
      }

      .template-card {
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 20px;
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: center;
        background: #ffffff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .template-card:hover,
      .template-card.selected {
        border-color: #3b82f6;
        background: #ffffff;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
      }

      .template-card.multi-selected {
        border-color: #10b981;
        background: rgba(16, 185, 129, 0.05);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.15);
      }

      .theme-card {
        position: relative;
      }

      .theme-card .selection-indicator {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: #10b981;
        color: white;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 16px;
      }

      .theme-card.multi-selected .selection-indicator {
        display: flex;
      }

      .theme-image {
        width: 100%;
        height: 160px;
        object-fit: contain;
        background: #f9fafb;
        border-radius: 8px;
        margin-bottom: 16px;
        border: 1px solid #e5e7eb;
        padding: 8px;
      }

      .request-field {
        margin-top: 10px;
        display: none;
      }

      .theme-card.multi-selected .request-field {
        display: block;
      }

      .request-field textarea {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 0.875rem;
        resize: vertical;
        min-height: 60px;
        font-family: inherit;
        color: #374151;
      }

      .tag-btn {
        padding: 8px 16px;
        border: 1px solid #e5e7eb;
        border-radius: 20px;
        background: white;
        color: #374151;
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.2s ease;
        font-family: inherit;
      }

      .tag-btn:hover {
        border-color: #3b82f6;
        background: rgba(59, 130, 246, 0.05);
      }

      .tag-btn.selected {
        border-color: #3b82f6;
        background: #3b82f6;
        color: white;
      }

      .template-preview {
        width: 100%;
        height: 140px;
        background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 16px;
        color: #718096;
        font-weight: 500;
        border: 1px solid #e2e8f0;
      }

      .photo-upload {
        border: 2px dashed #cbd5e0;
        border-radius: 16px;
        padding: 48px 24px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 24px;
        background: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(10px);
      }

      .photo-upload:hover {
        border-color: #3b82f6;
        background: rgba(59, 130, 246, 0.02);
        transform: translateY(-2px);
      }

      .photo-upload.dragover {
        border-color: #3b82f6;
        background: rgba(59, 130, 246, 0.05);
        transform: scale(1.02);
      }

      .payment-method {
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        padding: 16px;
        cursor: pointer;
        text-align: center;
        transition: all 0.2s ease;
        background: white;
      }

      .payment-method:hover {
        border-color: #3b82f6;
        background: rgba(59, 130, 246, 0.05);
        transform: translateY(-1px);
      }

      .payment-method.selected {
        border-color: #3b82f6;
        background: rgba(59, 130, 246, 0.1);
      }

      .uploaded-photos {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: 16px;
        margin-top: 24px;
      }

      .uploaded-photo {
        width: 100px;
        height: 100px;
        border-radius: 12px;
        object-fit: cover;
        border: 2px solid #e2e8f0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }

      .feedback-section {
        margin-top: 32px;
        padding: 24px;
        background: rgba(247, 250, 252, 0.8);
        border: 1px solid #e2e8f0;
        border-radius: 16px;
        backdrop-filter: blur(10px);
      }

      .sample-result {
        width: 100%;
        max-width: 320px;
        margin: 24px auto;
        border-radius: 16px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .payment-method:hover {
        border-color: #3b82f6 !important;
        background-color: rgba(59, 130, 246, 0.02) !important;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
      }

      h1,
      h2,
      h3 {
        color: #2d3748;
        font-weight: 600;
        letter-spacing: -0.01em;
        margin-bottom: 20px;
      }

      h2 {
        font-size: 2rem;
        margin-bottom: 24px;
        background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      h3 {
        font-size: 1.4rem;
        margin-bottom: 16px;
      }

      @media (max-width: 768px) {
        .container {
          padding: 32px 24px;
          margin: 20px auto;
        }

        .logo {
          font-size: 2.4rem;
        }

        .subtitle {
          font-size: 1.1rem;
          margin-bottom: 40px;
        }

        .options {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .option-card {
          padding: 28px 20px;
        }

        h2 {
          font-size: 1.6rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          padding: 14px 16px;
        }

        .btn {
          padding: 14px 24px;
        }
      }

      @media (max-width: 1440px) {
        .container {
          max-width: 100%;
          padding: 0 24px;
        }

        .main-content {
          padding: 60px 24px 40px;
        }

        .logo {
          font-size: 3rem;
        }

        .options {
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 20px;
        }
      }

      @media (max-width: 1200px) {
        .container {
          padding: 0 20px;
        }

        #influencer-profile > div > div:first-child {
          grid-template-columns: 1fr !important;
          gap: 30px !important;
        }

        #influencer-statistics > div:nth-child(3) {
          grid-template-columns: 1fr !important;
        }

        #influencer-statistics .insight-grid {
          grid-template-columns: 1fr !important;
          gap: 20px !important;
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 30px 16px;
        }

        .logo {
          font-size: 2.2rem;
        }

        .template-grid {
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 16px;
        }

        .options {
          grid-template-columns: 1fr;
          gap: 16px;
        }

        #influencer-statistics .grid-stats {
          grid-template-columns: repeat(2, 1fr) !important;
          gap: 16px !important;
        }

        h2 {
          font-size: 1.8rem;
        }

        .form-container {
          max-width: 100% !important;
        }
      }

      @media (max-width: 480px) {
        .container {
          padding: 20px 12px;
        }

        .logo {
          font-size: 1.8rem;
        }

        .subtitle {
          font-size: 1rem;
        }

        .template-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 16px;
        }
      }

      /* Dynamic Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes bounceIn {
        0% {
          opacity: 0;
          transform: scale(0.9);
        }
        50% {
          transform: scale(1.02);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      /* Apply animations */
      .logo {
        animation: bounceIn 0.8s ease-out;
      }

      .subtitle {
        animation: fadeInUp 0.8s ease-out 0.2s both;
      }

      .option-card {
        animation: fadeInUp 0.6s ease-out both;
      }

      .option-card:nth-child(1) {
        animation-delay: 0.1s;
      }
      .option-card:nth-child(2) {
        animation-delay: 0.2s;
      }
      .option-card:nth-child(3) {
        animation-delay: 0.3s;
      }

      .template-card {
        animation: fadeInUp 0.5s ease-out both;
      }

      .template-card:nth-child(1) {
        animation-delay: 0.1s;
      }
      .template-card:nth-child(2) {
        animation-delay: 0.2s;
      }
      .template-card:nth-child(3) {
        animation-delay: 0.3s;
      }
      .template-card:nth-child(4) {
        animation-delay: 0.4s;
      }

      .btn {
        animation: slideInLeft 0.6s ease-out 0.3s both;
        position: relative;
        overflow: hidden;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .btn:hover::before {
        left: 100%;
      }

      .back-btn {
        animation: slideInLeft 0.4s ease-out;
      }

      .form-container {
        animation: fadeInUp 0.6s ease-out 0.4s both;
      }

      /* Hover effects */
      .option-icon {
        transition: all 0.3s ease;
      }

      .option-card:hover .option-icon {
        animation: float 2s ease-in-out infinite;
      }

      .theme-image {
        transition: all 0.3s ease;
      }

      .template-card:hover .theme-image {
        transform: scale(1.05);
      }

      /* Loading animation for progress bars */
      @keyframes progressAnimation {
        from {
          width: 0%;
        }
        to {
          width: var(--progress-width);
        }
      }

      .progress-fill {
        animation: progressAnimation 2s ease-in-out;
      }

      /* Photo Modal Styles */
      .photo-modal {
        display: none;
        position: fixed;
        z-index: 10000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        animation: fadeIn 0.3s ease;
      }

      .photo-modal.show {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .modal-content {
        position: relative;
        max-width: 90vw;
        max-height: 90vh;
        background: #fff;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: modalSlideIn 0.4s ease;
      }

      .modal-image {
        width: 100%;
        height: auto;
        display: block;
        max-height: 85vh;
        object-fit: contain;
      }

      .modal-close {
        position: absolute;
        top: 15px;
        right: 15px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        font-size: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        z-index: 10001;
      }

      .modal-close:hover {
        background: rgba(0, 0, 0, 0.9);
        transform: scale(1.1);
      }

      .modal-info {
        padding: 20px;
        background: #f8f9fa;
        text-align: center;
      }

      .modal-info h3 {
        margin: 0 0 8px 0;
        color: #2d3748;
        font-size: 1.2rem;
        font-weight: 600;
      }

      .modal-info p {
        margin: 0;
        color: #666;
        font-size: 0.9rem;
      }

      /* Modal Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: scale(0.9) translateY(-20px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      /* Clickable photo cursor */
      .clickable-photo {
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
      }

      .clickable-photo:hover {
        transform: scale(1.02);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .clickable-photo::after {
        content: "🔍";
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .clickable-photo:hover::after {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <!-- Photo Modal -->
    <div id="photoModal" class="photo-modal" onclick="closePhotoModal(event)">
      <div class="modal-content">
        <button class="modal-close" onclick="closePhotoModal()">&times;</button>
        <img id="modalImage" class="modal-image" src="" alt="" />
        <div class="modal-info">
          <h3 id="modalTitle">AI 네컷사진</h3>
          <p id="modalDescription">클릭하여 확대된 이미지를 확인하세요</p>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- 로그인 화면 -->
      <div id="login-screen">
        <div class="logo">📸 studio ain</div>
        <div class="subtitle">
          인플루언서와 함께하는 프리미엄 AI 포토 스튜디오
        </div>

        <div class="form-container" style="max-width: 400px; margin: 0 auto">
          <div class="form-group">
            <label>사용자 유형</label>
            <select id="login-user-type">
              <option value="">선택해주세요</option>
              <option value="customer">일반 고객</option>
              <option value="influencer">인플루언서</option>
            </select>
          </div>
          <div class="form-group">
            <label>이메일</label>
            <input
              type="email"
              id="login-email"
              placeholder="이메일을 입력해주세요"
            />
          </div>
          <div class="form-group">
            <label>비밀번호</label>
            <input
              type="password"
              id="login-password"
              placeholder="비밀번호를 입력해주세요"
            />
          </div>
          <button class="btn" onclick="performLogin()">로그인</button>
          <p style="text-align: center; margin-top: 20px; color: #666">
            계정이 없으신가요?
            <a
              href="#"
              onclick="showSignup()"
              style="color: #3b82f6; text-decoration: none"
              >회원가입</a
            >
          </p>
        </div>
      </div>

      <!-- 회원가입 화면 -->
      <div id="signup-screen" class="hidden">
        <button class="back-btn" onclick="showLogin()">← 로그인으로</button>
        <div class="logo">📸 studio ain</div>
        <div class="subtitle">회원가입</div>

        <div class="form-container" style="max-width: 400px; margin: 0 auto">
          <div class="form-group">
            <label>이름</label>
            <input
              type="text"
              id="signup-name"
              placeholder="이름을 입력해주세요"
            />
          </div>
          <div class="form-group">
            <label>이메일</label>
            <input
              type="email"
              id="signup-email"
              placeholder="이메일을 입력해주세요"
            />
          </div>
          <div class="form-group">
            <label>비밀번호</label>
            <input
              type="password"
              id="signup-password"
              placeholder="비밀번호를 입력해주세요"
            />
          </div>
          <div class="form-group">
            <label>사용자 유형</label>
            <select id="user-type">
              <option value="">선택해주세요</option>
              <option value="customer">일반 고객</option>
              <option value="influencer">인플루언서</option>
            </select>
          </div>
          <button class="btn" onclick="performSignup()">회원가입</button>
        </div>
      </div>

      <!-- 메인 화면 -->
      <div id="main-screen" class="hidden">
        <div class="logo">📸 studio ain</div>
        <div class="subtitle">
          인플루언서와 함께하는 프리미엄 AI 포토 스튜디오
        </div>

        <div class="options" id="main-options">
          <!-- 사용자 유형별 메뉴가 여기에 동적으로 생성됩니다 -->
        </div>
      </div>

      <!-- 인플루언서 플로우 -->
      <div id="influencer-flow" class="hidden">
        <button class="back-btn" onclick="showInfluencerMain()">
          ← 메인으로
        </button>

        <!-- 인플루언서 1단계: 서비스 신청 -->
        <div id="influencer-step1">
          <h2>인플루언서 서비스 신청</h2>
          <div class="form-container">
            <div class="form-group">
              <label>이름</label>
              <input
                type="text"
                id="influencer-name"
                placeholder="이름을 입력해주세요"
              />
            </div>
            <div class="form-group">
              <label>연락처</label>
              <input
                type="tel"
                id="influencer-phone"
                placeholder="연락처를 입력해주세요"
              />
            </div>
            <div class="form-group">
              <label>이메일</label>
              <input
                type="email"
                id="influencer-email"
                placeholder="이메일을 입력해주세요"
              />
            </div>
            <button class="btn" onclick="goToInfluencerStep2()">
              다음 단계
            </button>
          </div>
        </div>

        <!-- 인플루언서 2단계: SNS ID 또는 사진 업로드 -->
        <div id="influencer-step2" class="hidden">
          <h2>SNS 정보 또는 사진 제공</h2>
          <div class="form-container">
            <div class="form-group">
              <label>방법 선택</label>
              <select id="upload-method" onchange="toggleUploadMethod()">
                <option value="">선택해주세요</option>
                <option value="sns">SNS 계정 연동</option>
                <option value="photo">사진 직접 업로드</option>
              </select>
            </div>

            <div id="sns-section" class="hidden">
              <div class="form-group">
                <label>SNS 플랫폼</label>
                <select id="sns-platform" onchange="checkStep2Completion()">
                  <option value="">선택해주세요</option>
                  <option value="instagram">인스타그램</option>
                  <option value="tiktok">틱톡</option>
                  <option value="youtube">유튜브</option>
                </select>
              </div>
              <div class="form-group">
                <label>SNS ID</label>
                <input
                  type="text"
                  id="sns-id"
                  placeholder="@username 형태로 입력해주세요"
                  oninput="checkStep2Completion()"
                />
              </div>
            </div>

            <div id="photo-section" class="hidden">
              <div
                class="photo-upload"
                onclick="document.getElementById('photo-input').click()"
              >
                <div>📷 사진을 업로드하려면 클릭하거나 드래그하세요</div>
                <input
                  type="file"
                  id="photo-input"
                  multiple
                  accept="image/*"
                  style="display: none"
                  onchange="handlePhotoUpload(event)"
                />
              </div>
              <div id="uploaded-photos" class="uploaded-photos"></div>
            </div>

            <button
              class="btn"
              onclick="goToInfluencerStep3()"
              disabled
              id="step2-next-btn"
            >
              템플릿 생성하기
            </button>
          </div>
        </div>

        <!-- 인플루언서 3단계: 템플릿 스타일 선택 -->
        <div id="influencer-step3" class="hidden">
          <h2>템플릿 스타일 선택</h2>
          <p style="color: #666; margin-bottom: 20px">
            원하는 테마를 선택하세요 (여러 개 선택 가능)
          </p>
          <div class="template-grid" id="theme-selection-grid">
            <!-- 테마 카드들이 여기에 동적으로 생성됩니다 -->
          </div>
          <button
            class="btn"
            onclick="generateSelectedTemplates()"
            disabled
            id="generate-templates-btn"
          >
            선택한 테마로 템플릿 생성
          </button>
        </div>

        <!-- 인플루언서 4단계: 피드백 및 등록 -->
        <div id="influencer-step4" class="hidden">
          <h2>템플릿 피드백 및 등록</h2>
          <div class="feedback-section">
            <div class="form-group">
              <label>템플릿에 대한 피드백</label>
              <textarea
                id="template-feedback"
                rows="4"
                placeholder="템플릿 개선사항이나 요청사항을 자세히 적어주세요..."
              ></textarea>
            </div>
            <div class="form-group">
              <label>만족도</label>
              <select id="satisfaction">
                <option value="">선택해주세요</option>
                <option value="5">매우 만족</option>
                <option value="4">만족</option>
                <option value="3">보통</option>
                <option value="2">불만족</option>
                <option value="1">매우 불만족</option>
              </select>
            </div>
            <button class="btn" onclick="submitFeedback()">피드백 제출</button>
            <button
              class="btn"
              onclick="registerTemplate()"
              style="background: #3b82f6; margin-top: 10px"
            >
              템플릿 등록하기
            </button>
          </div>
        </div>

        <!-- 인플루언서 통계 대시보드 -->
        <div id="influencer-statistics" class="hidden">
          <button class="back-btn" onclick="showInfluencerMain()">
            ← 메인으로
          </button>
          <h2>📊 나의 대시보드</h2>

          <!-- 주요 지표 카드들 -->
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
              gap: 20px;
              margin-bottom: 40px;
            "
          >
            <div
              style="
                background: #3b82f6;
                color: white;
                padding: 24px;
                border-radius: 16px;
                box-shadow: 0 4px 16px rgba(59, 130, 246, 0.2);
              "
            >
              <h3
                style="
                  color: white;
                  margin-bottom: 8px;
                  font-size: 0.9rem;
                  opacity: 0.9;
                "
              >
                💰 총 수익
              </h3>
              <div
                style="font-size: 2.2rem; font-weight: bold; margin-bottom: 4px"
              >
                ₩1,250,000
              </div>
              <div style="opacity: 0.8; font-size: 0.85rem">
                이번 달: +₩185,000 (+17.3%)
              </div>
            </div>

            <div
              style="
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                color: white;
                padding: 24px;
                border-radius: 16px;
                box-shadow: 0 8px 32px rgba(240, 147, 251, 0.3);
              "
            >
              <h3
                style="
                  color: white;
                  margin-bottom: 8px;
                  font-size: 0.9rem;
                  opacity: 0.9;
                "
              >
                📈 총 주문수
              </h3>
              <div
                style="font-size: 2.2rem; font-weight: bold; margin-bottom: 4px"
              >
                487
              </div>
              <div style="opacity: 0.8; font-size: 0.85rem">
                이번 달: +42건 (+9.4%)
              </div>
            </div>

            <div
              style="
                background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
                color: white;
                padding: 24px;
                border-radius: 16px;
                box-shadow: 0 8px 32px rgba(79, 172, 254, 0.3);
              "
            >
              <h3
                style="
                  color: white;
                  margin-bottom: 8px;
                  font-size: 0.9rem;
                  opacity: 0.9;
                "
              >
                ⭐ 평균 평점
              </h3>
              <div
                style="font-size: 2.2rem; font-weight: bold; margin-bottom: 4px"
              >
                4.8
              </div>
              <div style="opacity: 0.8; font-size: 0.85rem">
                리뷰 234개 • 만족도 96%
              </div>
            </div>

            <div
              style="
                background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
                color: white;
                padding: 24px;
                border-radius: 16px;
                box-shadow: 0 8px 32px rgba(250, 112, 154, 0.3);
              "
            >
              <h3
                style="
                  color: white;
                  margin-bottom: 8px;
                  font-size: 0.9rem;
                  opacity: 0.9;
                "
              >
                👥 팔로워
              </h3>
              <div
                style="font-size: 2.2rem; font-weight: bold; margin-bottom: 4px"
              >
                12.4K
              </div>
              <div style="opacity: 0.8; font-size: 0.85rem">
                이번 주: +287명 (+2.4%)
              </div>
            </div>
          </div>

          <!-- 템플릿 성과 분석 -->
          <div
            style="
              display: grid;
              grid-template-columns: 2fr 1fr;
              gap: 30px;
              margin-bottom: 40px;
            "
          >
            <div
              style="
                background: white;
                border-radius: 16px;
                border: 1px solid #e2e8f0;
                padding: 24px;
              "
            >
              <h3 style="margin-bottom: 20px; color: #2d3748">
                🏆 베스트 템플릿 순위
              </h3>
              <div style="space-y: 12px">
                <div
                  style="
                    display: flex;
                    align-items: center;
                    padding: 16px;
                    border-radius: 12px;
                    background: #f8f9fa;
                    margin-bottom: 12px;
                  "
                >
                  <div
                    style="
                      background: #ffd700;
                      color: #8b6914;
                      width: 32px;
                      height: 32px;
                      border-radius: 50%;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      font-weight: bold;
                      margin-right: 16px;
                    "
                  >
                    1
                  </div>
                  <img
                    src="assets/templates/night.jpeg"
                    style="
                      width: 50px;
                      height: 50px;
                      object-fit: contain;
                      background: #fff;
                      border-radius: 8px;
                      margin-right: 16px;
                      border: 1px solid #e2e8f0;
                    "
                  />
                  <div style="flex: 1">
                    <div style="font-weight: 600; color: #2d3748">
                      야경 템플릿
                    </div>
                    <div style="color: #666; font-size: 0.85rem">
                      187건 주문 • ₩467,500 • 전환율 23.4%
                    </div>
                  </div>
                  <div style="text-align: right">
                    <div style="color: #10b981; font-weight: 600">+15.2%</div>
                    <div style="color: #666; font-size: 0.8rem">vs 지난달</div>
                  </div>
                </div>

                <div
                  style="
                    display: flex;
                    align-items: center;
                    padding: 16px;
                    border-radius: 12px;
                    background: #f8f9fa;
                    margin-bottom: 12px;
                  "
                >
                  <div
                    style="
                      background: #c0c0c0;
                      color: #666;
                      width: 32px;
                      height: 32px;
                      border-radius: 50%;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      font-weight: bold;
                      margin-right: 16px;
                    "
                  >
                    2
                  </div>
                  <img
                    src="assets/templates/amusement.jpeg"
                    style="
                      width: 50px;
                      height: 50px;
                      object-fit: contain;
                      background: #fff;
                      border-radius: 8px;
                      margin-right: 16px;
                      border: 1px solid #e2e8f0;
                    "
                  />
                  <div style="flex: 1">
                    <div style="font-weight: 600; color: #2d3748">
                      놀이공원 템플릿
                    </div>
                    <div style="color: #666; font-size: 0.85rem">
                      163건 주문 • ₩407,500 • 전환율 19.8%
                    </div>
                  </div>
                  <div style="text-align: right">
                    <div style="color: #10b981; font-weight: 600">+8.7%</div>
                    <div style="color: #666; font-size: 0.8rem">vs 지난달</div>
                  </div>
                </div>

                <div
                  style="
                    display: flex;
                    align-items: center;
                    padding: 16px;
                    border-radius: 12px;
                    background: #f8f9fa;
                  "
                >
                  <div
                    style="
                      background: #cd7f32;
                      color: #fff;
                      width: 32px;
                      height: 32px;
                      border-radius: 50%;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      font-weight: bold;
                      margin-right: 16px;
                    "
                  >
                    3
                  </div>
                  <img
                    src="assets/templates/basic.png"
                    style="
                      width: 50px;
                      height: 50px;
                      object-fit: contain;
                      background: #fff;
                      border-radius: 8px;
                      margin-right: 16px;
                      border: 1px solid #e2e8f0;
                    "
                  />
                  <div style="flex: 1">
                    <div style="font-weight: 600; color: #2d3748">
                      인생네컷 템플릿
                    </div>
                    <div style="color: #666; font-size: 0.85rem">
                      137건 주문 • ₩342,500 • 전환율 16.2%
                    </div>
                  </div>
                  <div style="text-align: right">
                    <div style="color: #dc3545; font-weight: 600">-3.4%</div>
                    <div style="color: #666; font-size: 0.8rem">vs 지난달</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 월별 수익 트렌드 -->
            <div
              style="
                background: white;
                border-radius: 16px;
                border: 1px solid #e2e8f0;
                padding: 24px;
              "
            >
              <h3 style="margin-bottom: 20px; color: #2d3748">📊 월별 수익</h3>
              <div style="space-y: 8px">
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 8px 0;
                  "
                >
                  <span style="color: #666">12월</span>
                  <span style="font-weight: 600">₩185,000</span>
                </div>
                <div
                  style="
                    width: 100%;
                    height: 6px;
                    background: #e2e8f0;
                    border-radius: 3px;
                    margin: 4px 0;
                  "
                >
                  <div
                    style="
                      width: 85%;
                      height: 100%;
                      background: #3b82f6;
                      border-radius: 3px;
                    "
                  ></div>
                </div>

                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 8px 0;
                  "
                >
                  <span style="color: #666">11월</span>
                  <span style="font-weight: 600">₩156,000</span>
                </div>
                <div
                  style="
                    width: 100%;
                    height: 6px;
                    background: #e2e8f0;
                    border-radius: 3px;
                    margin: 4px 0;
                  "
                >
                  <div
                    style="
                      width: 72%;
                      height: 100%;
                      background: #3b82f6;
                      border-radius: 3px;
                    "
                  ></div>
                </div>

                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 8px 0;
                  "
                >
                  <span style="color: #666">10월</span>
                  <span style="font-weight: 600">₩142,000</span>
                </div>
                <div
                  style="
                    width: 100%;
                    height: 6px;
                    background: #e2e8f0;
                    border-radius: 3px;
                    margin: 4px 0;
                  "
                >
                  <div
                    style="
                      width: 65%;
                      height: 100%;
                      background: #3b82f6;
                      border-radius: 3px;
                    "
                  ></div>
                </div>

                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 8px 0;
                  "
                >
                  <span style="color: #666">9월</span>
                  <span style="font-weight: 600">₩178,000</span>
                </div>
                <div
                  style="
                    width: 100%;
                    height: 6px;
                    background: #e2e8f0;
                    border-radius: 3px;
                    margin: 4px 0;
                  "
                >
                  <div
                    style="
                      width: 82%;
                      height: 100%;
                      background: #3b82f6;
                      border-radius: 3px;
                    "
                  ></div>
                </div>
              </div>
            </div>
          </div>

          <!-- 고객 피드백 & 인사이트 -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px">
            <div
              style="
                background: white;
                border-radius: 16px;
                border: 1px solid #e2e8f0;
                padding: 24px;
              "
            >
              <h3 style="margin-bottom: 20px; color: #2d3748">
                💬 최근 고객 리뷰
              </h3>
              <div style="space-y: 16px">
                <div
                  style="
                    padding: 16px;
                    background: #f8f9fa;
                    border-radius: 12px;
                    border-left: 4px solid #ffd700;
                  "
                >
                  <div
                    style="
                      display: flex;
                      align-items: center;
                      margin-bottom: 8px;
                    "
                  >
                    <div style="color: #ffd700; margin-right: 8px">
                      ⭐⭐⭐⭐⭐
                    </div>
                    <span style="font-size: 0.85rem; color: #666">김*진님</span>
                  </div>
                  <p style="color: #2d3748; font-size: 0.9rem">
                    "야경 템플릿 너무 예뻐요! 인플루언서님과 함께 찍은 것 같은
                    느낌이에요 ✨"
                  </p>
                </div>

                <div
                  style="
                    padding: 16px;
                    background: #f8f9fa;
                    border-radius: 12px;
                    border-left: 4px solid #3b82f6;
                  "
                >
                  <div
                    style="
                      display: flex;
                      align-items: center;
                      margin-bottom: 8px;
                    "
                  >
                    <div style="color: #ffd700; margin-right: 8px">
                      ⭐⭐⭐⭐⭐
                    </div>
                    <span style="font-size: 0.85rem; color: #666">박*수님</span>
                  </div>
                  <p style="color: #2d3748; font-size: 0.9rem">
                    "놀이공원 컨셉 완전 취저! 친구들이 다 물어봤어요 ㅎㅎ"
                  </p>
                </div>
              </div>
            </div>

            <div
              style="
                background: white;
                border-radius: 16px;
                border: 1px solid #e2e8f0;
                padding: 24px;
              "
            >
              <h3 style="margin-bottom: 20px; color: #2d3748">
                🎯 성과 인사이트
              </h3>
              <div style="space-y: 12px">
                <div
                  style="padding: 12px; background: #e3f2fd; border-radius: 8px"
                >
                  <div
                    style="color: #1976d2; font-weight: 600; font-size: 0.85rem"
                  >
                    🔥 트렌딩
                  </div>
                  <p style="color: #2d3748; font-size: 0.9rem; margin-top: 4px">
                    야경 테마가 20대 여성 고객들 사이에서 인기 급상승!
                  </p>
                </div>

                <div
                  style="padding: 12px; background: #f3e5f5; border-radius: 8px"
                >
                  <div
                    style="color: #7b1fa2; font-weight: 600; font-size: 0.85rem"
                  >
                    📈 기회
                  </div>
                  <p style="color: #2d3748; font-size: 0.9rem; margin-top: 4px">
                    주말 주문량이 평일 대비 2.3배 높아요. 주말 특가 이벤트
                    고려해보세요!
                  </p>
                </div>

                <div
                  style="padding: 12px; background: #fff3e0; border-radius: 8px"
                >
                  <div
                    style="color: #ef6c00; font-weight: 600; font-size: 0.85rem"
                  >
                    💡 제안
                  </div>
                  <p style="color: #2d3748; font-size: 0.9rem; margin-top: 4px">
                    크리스마스 시즌 맞춤 템플릿 출시하면 수익 20% 증가 예상!
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 인플루언서 프로필 편집 -->
        <div id="influencer-profile" class="hidden">
          <button class="back-btn" onclick="showInfluencerMain()">
            ← 메인으로
          </button>
          <h2>✨ 나의 프로필</h2>

          <div
            style="
              display: grid;
              grid-template-columns: 1fr 2fr;
              gap: 40px;
              max-width: 1200px;
              margin: 0 auto;
            "
          >
            <!-- 왼쪽: 프로필 미리보기 -->
            <div
              style="
                background: white;
                border-radius: 20px;
                border: 1px solid #e2e8f0;
                padding: 32px;
                text-align: center;
                height: fit-content;
              "
            >
              <h3 style="margin-bottom: 24px; color: #2d3748">
                🔍 고객 화면 미리보기
              </h3>

              <div
                style="
                  background: #3b82f6;
                  padding: 24px;
                  border-radius: 16px;
                  color: white;
                  margin-bottom: 20px;
                "
              >
                <div
                  style="
                    width: 80px;
                    height: 80px;
                    border-radius: 50%;
                    background: rgba(255, 255, 255, 0.2);
                    margin: 0 auto 16px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 2rem;
                    border: 3px solid rgba(255, 255, 255, 0.3);
                  "
                >
                  👤
                </div>
                <h3 style="color: white; margin-bottom: 8px" id="preview-name">
                  김인플
                </h3>
                <div
                  style="opacity: 0.9; font-size: 0.9rem; margin-bottom: 12px"
                >
                  ⭐ 4.8 평점 • 👥 12.4K 팔로워
                </div>
                <div
                  style="
                    display: flex;
                    justify-content: center;
                    flex-wrap: wrap;
                    gap: 6px;
                    margin-bottom: 16px;
                  "
                >
                  <span
                    style="
                      background: rgba(255, 255, 255, 0.2);
                      padding: 4px 12px;
                      border-radius: 12px;
                      font-size: 0.8rem;
                    "
                    >라이프스타일</span
                  >
                  <span
                    style="
                      background: rgba(255, 255, 255, 0.2);
                      padding: 4px 12px;
                      border-radius: 12px;
                      font-size: 0.8rem;
                    "
                    >여행</span
                  >
                </div>
                <p
                  style="opacity: 0.9; font-size: 0.9rem; line-height: 1.4"
                  id="preview-bio"
                >
                  안녕하세요! 트렌디한 포토카드를 만들어드리는 김인플입니다 ✨
                </p>
              </div>

              <div
                style="
                  background: #f8f9fa;
                  padding: 16px;
                  border-radius: 12px;
                  border: 1px solid #e2e8f0;
                  margin-bottom: 20px;
                "
              >
                <h4 style="color: #2d3748; margin-bottom: 12px">📱 SNS 연결</h4>
                <div style="display: flex; justify-content: center; gap: 12px">
                  <div
                    style="
                      width: 36px;
                      height: 36px;
                      background: linear-gradient(
                        135deg,
                        #833ab4 0%,
                        #fd1d1d 50%,
                        #fcb045 100%
                      );
                      border-radius: 8px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      color: white;
                      font-size: 1.2rem;
                    "
                  >
                    📷
                  </div>
                  <div
                    style="
                      width: 36px;
                      height: 36px;
                      background: #000;
                      border-radius: 8px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      color: white;
                      font-size: 1.2rem;
                    "
                  >
                    🎵
                  </div>
                  <div
                    style="
                      width: 36px;
                      height: 36px;
                      background: #ff0000;
                      border-radius: 8px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      color: white;
                      font-size: 1.2rem;
                    "
                  >
                    📺
                  </div>
                </div>
              </div>

              <div
                style="
                  display: grid;
                  grid-template-columns: repeat(3, 1fr);
                  gap: 8px;
                "
              >
                <img
                  src="assets/templates/night.jpeg"
                  style="
                    width: 100%;
                    aspect-ratio: 1;
                    object-fit: cover;
                    border-radius: 8px;
                    border: 1px solid #e2e8f0;
                  "
                />
                <img
                  src="assets/templates/amusement.jpeg"
                  style="
                    width: 100%;
                    aspect-ratio: 1;
                    object-fit: cover;
                    border-radius: 8px;
                    border: 1px solid #e2e8f0;
                  "
                />
                <img
                  src="assets/templates/basic.png"
                  style="
                    width: 100%;
                    aspect-ratio: 1;
                    object-fit: cover;
                    border-radius: 8px;
                    border: 1px solid #e2e8f0;
                  "
                />
              </div>
            </div>

            <!-- 오른쪽: 프로필 설정 폼 -->
            <div
              style="
                background: white;
                border-radius: 20px;
                border: 1px solid #e2e8f0;
                padding: 32px;
              "
            >
              <h3 style="margin-bottom: 24px; color: #2d3748">
                ⚙️ 프로필 설정
              </h3>

              <div class="form-group">
                <label>🎭 인플루언서 이름</label>
                <input
                  type="text"
                  id="influencer-profile-name"
                  placeholder="고객에게 보여질 이름"
                  value="김인플"
                  oninput="updatePreview()"
                />
                <small style="color: #666; font-size: 0.85rem"
                  >고객들이 보는 공개 이름입니다</small
                >
              </div>

              <div class="form-group">
                <label>✍️ 자기소개</label>
                <textarea
                  id="influencer-bio"
                  rows="4"
                  placeholder="나만의 매력을 어필해보세요!"
                  oninput="updatePreview()"
                >
안녕하세요! 트렌디한 포토카드를 만들어드리는 김인플입니다 ✨</textarea
                >
                <small style="color: #666; font-size: 0.85rem"
                  >고객들에게 보여질 소개글입니다 (최대 200자)</small
                >
              </div>

              <div class="form-group">
                <label>📱 SNS 계정</label>
                <div
                  style="
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 12px;
                  "
                >
                  <div>
                    <label
                      style="
                        font-size: 0.85rem;
                        color: #666;
                        margin-bottom: 4px;
                        display: block;
                      "
                      >Instagram</label
                    >
                    <input
                      type="text"
                      id="instagram"
                      placeholder="@username"
                      value="@kim_influencer"
                    />
                  </div>
                  <div>
                    <label
                      style="
                        font-size: 0.85rem;
                        color: #666;
                        margin-bottom: 4px;
                        display: block;
                      "
                      >TikTok</label
                    >
                    <input type="text" id="tiktok" placeholder="@username" />
                  </div>
                  <div>
                    <label
                      style="
                        font-size: 0.85rem;
                        color: #666;
                        margin-bottom: 4px;
                        display: block;
                      "
                      >YouTube</label
                    >
                    <input type="text" id="youtube" placeholder="채널명" />
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label>🎯 전문 분야</label>
                <div
                  style="
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                    gap: 12px;
                    margin-top: 12px;
                  "
                >
                  <button class="tag-btn" onclick="toggleTag(this)">
                    👗 패션
                  </button>
                  <button class="tag-btn" onclick="toggleTag(this)">
                    💄 뷰티
                  </button>
                  <button class="tag-btn selected" onclick="toggleTag(this)">
                    🏠 라이프스타일
                  </button>
                  <button class="tag-btn selected" onclick="toggleTag(this)">
                    ✈️ 여행
                  </button>
                  <button class="tag-btn" onclick="toggleTag(this)">
                    🍕 음식
                  </button>
                  <button class="tag-btn" onclick="toggleTag(this)">
                    💪 피트니스
                  </button>
                  <button class="tag-btn" onclick="toggleTag(this)">
                    📚 교육
                  </button>
                  <button class="tag-btn" onclick="toggleTag(this)">
                    🎮 게임
                  </button>
                </div>
                <small
                  style="
                    color: #666;
                    font-size: 0.85rem;
                    margin-top: 8px;
                    display: block;
                  "
                  >관심 분야를 선택하면 맞춤 고객을 추천받을 수 있어요</small
                >
              </div>

              <div class="form-group">
                <label>🎨 프로필 테마 색상</label>
                <div style="display: flex; gap: 12px; margin-top: 12px">
                  <div
                    onclick="changeThemeColor('#3B82F6')"
                    style="
                      width: 40px;
                      height: 40px;
                      background: #3b82f6;
                      border-radius: 50%;
                      cursor: pointer;
                      border: 3px solid #3b82f6;
                      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
                    "
                  ></div>
                  <div
                    onclick="changeThemeColor('linear-gradient(135deg, #f093fb 0%, #f5576c 100%)')"
                    style="
                      width: 40px;
                      height: 40px;
                      background: linear-gradient(
                        135deg,
                        #f093fb 0%,
                        #f5576c 100%
                      );
                      border-radius: 50%;
                      cursor: pointer;
                      border: 3px solid transparent;
                    "
                  ></div>
                  <div
                    onclick="changeThemeColor('linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)')"
                    style="
                      width: 40px;
                      height: 40px;
                      background: linear-gradient(
                        135deg,
                        #4facfe 0%,
                        #00f2fe 100%
                      );
                      border-radius: 50%;
                      cursor: pointer;
                      border: 3px solid transparent;
                    "
                  ></div>
                  <div
                    onclick="changeThemeColor('linear-gradient(135deg, #fa709a 0%, #fee140 100%)')"
                    style="
                      width: 40px;
                      height: 40px;
                      background: linear-gradient(
                        135deg,
                        #fa709a 0%,
                        #fee140 100%
                      );
                      border-radius: 50%;
                      cursor: pointer;
                      border: 3px solid transparent;
                    "
                  ></div>
                </div>
              </div>

              <div style="display: flex; gap: 12px; margin-top: 32px">
                <button
                  class="btn"
                  onclick="saveProfile()"
                  style="
                    flex: 1;
                    background: #3b82f6;
                    font-size: 1.1rem;
                    padding: 14px;
                  "
                >
                  💾 프로필 저장
                </button>
                <button
                  class="btn"
                  onclick="previewProfile()"
                  style="background: #3b82f6; padding: 14px 20px"
                >
                  👀 미리보기
                </button>
              </div>

              <!-- 프로필 통계 -->
              <div
                style="
                  background: #f8f9fa;
                  border-radius: 12px;
                  padding: 20px;
                  margin-top: 24px;
                  border: 1px solid #e2e8f0;
                "
              >
                <h4 style="color: #2d3748; margin-bottom: 16px">
                  📈 프로필 성과
                </h4>
                <div
                  style="
                    display: grid;
                    grid-template-columns: repeat(3, 1fr);
                    gap: 16px;
                    text-align: center;
                  "
                >
                  <div>
                    <div
                      style="
                        font-size: 1.5rem;
                        font-weight: bold;
                        color: #3b82f6;
                      "
                    >
                      324
                    </div>
                    <div style="font-size: 0.8rem; color: #666">
                      프로필 조회
                    </div>
                  </div>
                  <div>
                    <div
                      style="
                        font-size: 1.5rem;
                        font-weight: bold;
                        color: #f093fb;
                      "
                    >
                      87
                    </div>
                    <div style="font-size: 0.8rem; color: #666">팔로우</div>
                  </div>
                  <div>
                    <div
                      style="
                        font-size: 1.5rem;
                        font-weight: bold;
                        color: #4facfe;
                      "
                    >
                      23
                    </div>
                    <div style="font-size: 0.8rem; color: #666">
                      템플릿 주문
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 고객 플로우 -->
      <div id="customer-flow" class="hidden">
        <button class="back-btn" onclick="showMainScreen()">← 메인으로</button>

        <!-- 고객 1단계: 인플루언서 선택 -->
        <div id="customer-step1">
          <h2>인플루언서 선택</h2>
          <p style="color: #666; margin-bottom: 20px">
            함께 찍고 싶은 인플루언서를 선택해주세요
          </p>
          <div class="template-grid" id="influencer-selection-grid">
            <!-- 인플루언서 카드들이 여기에 동적으로 생성됩니다 -->
          </div>
          <button
            class="btn"
            onclick="goToCustomerStep2()"
            disabled
            id="influencer-next-btn"
          >
            선택한 인플루언서의 템플릿 보기
          </button>
        </div>

        <!-- 고객 2단계: 템플릿 선택 -->
        <div id="customer-step2" class="hidden">
          <!-- 선택된 인플루언서 정보 섹션 -->
          <div
            id="selected-influencer-info"
            style="
              background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
              border: 1px solid #e5e7eb;
              border-radius: 20px;
              padding: 32px;
              margin-bottom: 40px;
              box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
              animation: fadeInUp 0.6s ease-out;
            "
          >
            <div
              style="
                display: flex;
                align-items: center;
                gap: 24px;
                flex-wrap: wrap;
              "
            >
              <div style="position: relative">
                <div
                  id="influencer-cover-image"
                  style="
                    width: 120px;
                    height: 120px;
                    border-radius: 16px;
                    background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    overflow: hidden;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                  "
                >
                  <img
                    id="influencer-cover"
                    src=""
                    alt="인플루언서 커버"
                    style="width: 100%; height: 100%; object-fit: cover"
                  />
                </div>
                <div
                  style="
                    position: absolute;
                    -bottom: 8px;
                    -right: 8px;
                    background: #10b981;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 12px;
                    font-size: 0.75rem;
                    font-weight: 600;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
                  "
                >
                  ✓ 선택됨
                </div>
              </div>
              <div style="flex: 1; min-width: 250px">
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    margin-bottom: 16px;
                  "
                >
                  <h3
                    id="selected-influencer-name"
                    style="
                      margin: 0;
                      font-size: 1.75rem;
                      font-weight: 700;
                      color: #1f2937;
                      letter-spacing: -0.025em;
                    "
                  >
                    인플루언서 이름
                  </h3>
                  <span
                    style="
                      background: linear-gradient(135deg, #3b82f6, #2563eb);
                      color: white;
                      padding: 6px 12px;
                      border-radius: 20px;
                      font-size: 0.875rem;
                      font-weight: 600;
                      letter-spacing: -0.01em;
                    "
                    >프리미엄</span
                  >
                </div>
                <p
                  id="selected-influencer-description"
                  style="
                    margin: 0 0 20px 0;
                    color: #6b7280;
                    font-size: 1.125rem;
                    line-height: 1.6;
                  "
                >
                  인플루언서 설명
                </p>
                <div style="display: flex; gap: 16px; flex-wrap: wrap">
                  <div
                    style="
                      display: flex;
                      align-items: center;
                      gap: 8px;
                      padding: 8px 16px;
                      background: rgba(59, 130, 246, 0.1);
                      border-radius: 12px;
                    "
                  >
                    <span style="font-size: 1.2rem">📸</span>
                    <span
                      style="
                        font-size: 0.875rem;
                        font-weight: 600;
                        color: #3b82f6;
                      "
                      >템플릿 3개</span
                    >
                  </div>
                  <div
                    style="
                      display: flex;
                      align-items: center;
                      gap: 8px;
                      padding: 8px 16px;
                      background: rgba(16, 185, 129, 0.1);
                      border-radius: 12px;
                    "
                  >
                    <span style="font-size: 1.2rem">⭐</span>
                    <span
                      style="
                        font-size: 0.875rem;
                        font-weight: 600;
                        color: #10b981;
                      "
                      >4.9/5.0</span
                    >
                  </div>
                  <div
                    style="
                      display: flex;
                      align-items: center;
                      gap: 8px;
                      padding: 8px 16px;
                      background: rgba(245, 101, 101, 0.1);
                      border-radius: 12px;
                    "
                  >
                    <span style="font-size: 1.2rem">🔥</span>
                    <span
                      style="
                        font-size: 0.875rem;
                        font-weight: 600;
                        color: #f56565;
                      "
                      >인기 인플루언서</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
          <h2>템플릿 선택</h2>
          <div class="template-grid" id="customer-template-grid">
            <!-- 템플릿 카드들이 여기에 동적으로 생성됩니다 -->
          </div>
          <button
            class="btn"
            onclick="goToCustomerStep3()"
            disabled
            id="template-next-btn"
          >
            다음 단계로
          </button>
        </div>

        <!-- 고객 3단계: 결제 -->
        <div id="customer-step3" class="hidden">
          <h2>💳 결제하기</h2>
          <div style="max-width: 500px; margin: 0 auto">
            <!-- 주문 요약 -->
            <div
              style="
                background: white;
                border-radius: 16px;
                border: 1px solid #e2e8f0;
                padding: 24px;
                margin-bottom: 24px;
              "
            >
              <h3 style="margin-bottom: 16px; color: #2d3748">📋 주문 내역</h3>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  margin-bottom: 12px;
                "
              >
                <span>AI 네컷사진 제작</span>
                <span style="font-weight: 600">₩9,000</span>
              </div>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  margin-bottom: 12px;
                "
              >
                <span style="color: #666">선택한 인플루언서:</span>
                <span id="payment-influencer">-</span>
              </div>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  margin-bottom: 12px;
                "
              >
                <span style="color: #666">선택한 템플릿:</span>
                <span id="payment-template">-</span>
              </div>
              <hr
                style="
                  margin: 16px 0;
                  border: none;
                  border-top: 1px solid #e2e8f0;
                "
              />
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  font-size: 1.2rem;
                  font-weight: bold;
                  color: #2d3748;
                "
              >
                <span>총 결제 금액</span>
                <span>₩9,000</span>
              </div>
            </div>

            <!-- 결제 방법 선택 -->
            <div
              style="
                background: white;
                border-radius: 16px;
                border: 1px solid #e2e8f0;
                padding: 24px;
                margin-bottom: 24px;
              "
            >
              <h3 style="margin-bottom: 16px; color: #2d3748">💳 결제 방법</h3>
              <div
                style="
                  display: grid;
                  grid-template-columns: repeat(2, 1fr);
                  gap: 12px;
                "
              >
                <div
                  onclick="selectPaymentMethod('card', this)"
                  id="payment-card"
                  class="payment-method"
                >
                  <div style="font-size: 1.5rem; margin-bottom: 8px">💳</div>
                  <div style="font-weight: 500">카드결제</div>
                </div>
                <div
                  onclick="selectPaymentMethod('kakao', this)"
                  id="payment-kakao"
                  class="payment-method"
                >
                  <div style="font-size: 1.5rem; margin-bottom: 8px">💛</div>
                  <div style="font-weight: 500">카카오페이</div>
                </div>
              </div>
            </div>

            <button
              class="btn"
              onclick="proceedToPhotoUpload()"
              id="payment-proceed-btn"
              style="
                width: 100%;
                font-size: 1.1rem;
                padding: 16px;
                background: #3b82f6;
                cursor: pointer;
                position: relative;
                z-index: 999;
              "
            >
              결제 후 사진 업로드하기
            </button>
          </div>
        </div>

        <!-- 고객 4단계: 얼굴 사진 업로드 -->
        <div id="customer-step4" class="hidden">
          <h2>얼굴 사진 업로드 (3-5장)</h2>
          <div
            class="photo-upload"
            onclick="document.getElementById('customer-photo-input').click()"
          >
            <div>📷 얼굴이 잘 보이는 사진 3-5장을 업로드해주세요</div>
            <input
              type="file"
              id="customer-photo-input"
              multiple
              accept="image/*"
              style="display: none"
              onchange="handleCustomerPhotoUpload(event)"
            />
          </div>
          <div id="customer-uploaded-photos" class="uploaded-photos"></div>
          <div style="margin-top: 20px; color: #666; font-size: 0.9rem">
            💡 더 나은 결과를 위한 팁:<br />
            • 정면에서 촬영한 사진<br />
            • 얼굴이 선명하게 보이는 사진<br />
            • 다양한 각도의 사진
          </div>
          <button
            class="btn"
            onclick="goToCustomerStep4()"
            disabled
            id="customer-photo-next-btn"
          >
            사진 처리하기
          </button>
        </div>

        <!-- 고객 5단계: 샘플 확인 -->
        <div id="customer-step5" class="hidden">
          <h2>✨ AI 네컷사진 완성!</h2>
          <div
            class="sample-result"
            id="generated-sample-container"
            style="text-align: center; margin: 32px auto"
          >
            <!-- 생성된 샘플이 여기에 표시됩니다 -->
          </div>
          <div
            style="
              display: flex;
              gap: 12px;
              justify-content: center;
              margin-top: 24px;
            "
          >
            <button
              class="btn"
              onclick="goToCustomerStep6()"
              style="background: #f59e0b; color: #fff"
            >
              수정 요청하기
            </button>
            <button
              class="btn"
              onclick="goToCustomerStep7()"
              style="background: #3b82f6"
            >
              이대로 주문하기
            </button>
          </div>
        </div>

        <!-- 고객 6단계: 피드백 -->
        <div id="customer-step6" class="hidden">
          <h2>샘플에 대한 피드백</h2>
          <div class="feedback-section">
            <div class="form-group">
              <label>개선 요청사항</label>
              <textarea
                id="customer-feedback"
                rows="4"
                placeholder="수정하고 싶은 부분이나 개선사항을 적어주세요..."
              ></textarea>
            </div>
            <button class="btn" onclick="submitCustomerFeedback()">
              피드백 제출
            </button>
            <button
              class="btn"
              onclick="goToCustomerStep7()"
              style="background: #3b82f6; margin-top: 10px"
            >
              최종 주문하기
            </button>
          </div>
        </div>

        <!-- 고객 7단계: 최종 주문 -->
        <div id="customer-step7" class="hidden">
          <h2>4컷 포토카드 주문</h2>
          <div
            class="sample-result"
            style="text-align: center; margin: 32px auto"
          >
            <img
              id="final-order-photo"
              src=""
              alt="완성된 AI 네컷사진"
              class="clickable-photo"
              style="
                max-width: 100%;
                height: auto;
                border-radius: 16px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                border: 1px solid #e2e8f0;
                cursor: pointer;
              "
              onclick="openPhotoModal(this.src, '완성된 AI 네컷사진', '주문할 최종 AI 네컷사진입니다')"
            />
            <p style="color: #666; margin-top: 16px; font-size: 0.9rem">
              주문할 최종 AI 네컷사진
              <span style="color: #3b82f6; font-weight: 500"
                >(클릭하여 확대)</span
              >
            </p>
          </div>

          <!-- 상품 정보 및 가격 -->
          <div
            style="
              background: #f8f9fa;
              padding: 20px;
              border-radius: 10px;
              margin: 20px 0;
            "
          >
            <h3 style="margin-bottom: 15px">📋 주문 정보</h3>
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
              "
            >
              <span>4컷 포토카드 (고품질 인화)</span>
              <span style="font-weight: bold">9,000원</span>
            </div>
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
              "
            >
              <span>배송비</span>
              <span>3,000원</span>
            </div>
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
                color: #10b981;
              "
            >
              <span>할인 (첫 주문)</span>
              <span>-2,000원</span>
            </div>
            <hr style="margin: 15px 0" />
            <div
              style="
                display: flex;
                justify-content: space-between;
                font-size: 1.2rem;
                font-weight: bold;
                color: #dc3545;
              "
            >
              <span>총 결제금액</span>
              <span>9,000원</span>
            </div>
          </div>

          <div class="form-container">
            <h3 style="margin-bottom: 20px">📦 배송 정보</h3>
            <div class="form-group">
              <label>받는 분 이름</label>
              <input
                type="text"
                id="delivery-name"
                placeholder="받는 분 이름을 입력해주세요"
              />
            </div>
            <div class="form-group">
              <label>연락처</label>
              <input
                type="tel"
                id="delivery-phone"
                placeholder="휴대폰 번호를 입력해주세요"
              />
            </div>
            <div class="form-group">
              <label>배송 주소</label>
              <textarea
                id="delivery-address"
                rows="3"
                placeholder="상세 주소까지 정확히 입력해주세요"
              ></textarea>
            </div>
            <div class="form-group">
              <label>배송 요청사항 (선택)</label>
              <input
                type="text"
                id="delivery-memo"
                placeholder="배송시 요청사항이 있으면 적어주세요"
              />
            </div>

            <div style="margin-top: 30px">
              <h3 style="margin-bottom: 20px">📤 수령 방법 선택</h3>
              <div style="display: flex; gap: 15px; justify-content: center">
                <button
                  class="btn"
                  onclick="selectDeliveryMethod('shipping')"
                  style="
                    background: #3b82f6;
                    font-size: 1.1rem;
                    padding: 15px 20px;
                    flex: 1;
                  "
                >
                  📦 배송으로 받기
                </button>
                <button
                  class="btn"
                  onclick="selectDeliveryMethod('kakao')"
                  style="
                    background: #f59e0b;
                    color: #000;
                    font-size: 1.1rem;
                    padding: 15px 20px;
                    flex: 1;
                  "
                >
                  💬 카카오톡 전송
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 고객 8단계: 배송정보 및 최종결제 -->
        <div id="customer-step8" class="hidden">
          <h2>💳 결제 정보 입력</h2>

          <!-- 주문 요약 -->
          <div
            style="
              background: #e3f2fd;
              padding: 20px;
              border-radius: 10px;
              margin-bottom: 30px;
            "
          >
            <h3 style="margin-bottom: 15px; color: #1976d2">📋 주문 요약</h3>
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 8px;
              "
            >
              <span>상품: 4컷 포토카드</span>
              <span>9,000원</span>
            </div>
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 8px;
              "
            >
              <span>배송비</span>
              <span>3,000원</span>
            </div>
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 8px;
                color: #10b981;
              "
            >
              <span>첫 주문 할인</span>
              <span>-2,000원</span>
            </div>
            <hr />
            <div
              style="
                display: flex;
                justify-content: space-between;
                font-weight: bold;
                font-size: 1.1rem;
                color: #dc3545;
              "
            >
              <span>총 결제금액</span>
              <span>9,000원</span>
            </div>
          </div>

          <div class="form-container">
            <!-- 결제 방법 선택 -->
            <div class="form-group">
              <label>결제 방법</label>
              <div
                style="
                  display: grid;
                  grid-template-columns: repeat(2, 1fr);
                  gap: 15px;
                  margin-top: 10px;
                "
              >
                <div
                  class="payment-method"
                  onclick="selectPaymentMethod('card', this)"
                  style="
                    border: 2px solid #ddd;
                    padding: 15px;
                    border-radius: 10px;
                    text-align: center;
                    cursor: pointer;
                    transition: all 0.3s;
                  "
                >
                  💳<br /><strong>신용카드</strong><br /><small>즉시결제</small>
                </div>
                <div
                  class="payment-method"
                  onclick="selectPaymentMethod('bank', this)"
                  style="
                    border: 2px solid #ddd;
                    padding: 15px;
                    border-radius: 10px;
                    text-align: center;
                    cursor: pointer;
                    transition: all 0.3s;
                  "
                >
                  🏦<br /><strong>계좌이체</strong><br /><small
                    >실시간이체</small
                  >
                </div>
              </div>
              <div
                style="
                  display: grid;
                  grid-template-columns: repeat(2, 1fr);
                  gap: 15px;
                  margin-top: 15px;
                "
              >
                <div
                  class="payment-method"
                  onclick="selectPaymentMethod('kakao', this)"
                  style="
                    border: 2px solid #ddd;
                    padding: 15px;
                    border-radius: 10px;
                    text-align: center;
                    cursor: pointer;
                    transition: all 0.3s;
                  "
                >
                  💛<br /><strong>카카오페이</strong><br /><small
                    >간편결제</small
                  >
                </div>
                <div
                  class="payment-method"
                  onclick="selectPaymentMethod('toss', this)"
                  style="
                    border: 2px solid #ddd;
                    padding: 15px;
                    border-radius: 10px;
                    text-align: center;
                    cursor: pointer;
                    transition: all 0.3s;
                  "
                >
                  🔵<br /><strong>토스페이</strong><br /><small>간편결제</small>
                </div>
              </div>
            </div>

            <!-- 신용카드 결제 폼 -->
            <div id="card-payment-form" class="hidden">
              <h3 style="margin: 30px 0 20px 0">💳 신용카드 정보</h3>
              <div class="form-group">
                <label>카드번호</label>
                <input
                  type="text"
                  id="card-number"
                  placeholder="1234-5678-9012-3456"
                  maxlength="19"
                  oninput="formatCardNumber(this)"
                />
              </div>
              <div
                style="
                  display: grid;
                  grid-template-columns: 1fr 1fr 1fr;
                  gap: 15px;
                "
              >
                <div class="form-group">
                  <label>유효기간</label>
                  <input
                    type="text"
                    id="card-expiry"
                    placeholder="MM/YY"
                    maxlength="5"
                    oninput="formatExpiry(this)"
                  />
                </div>
                <div class="form-group">
                  <label>CVC</label>
                  <input
                    type="text"
                    id="card-cvc"
                    placeholder="123"
                    maxlength="3"
                  />
                </div>
                <div class="form-group">
                  <label>할부</label>
                  <select id="installment">
                    <option value="0">일시불</option>
                    <option value="2">2개월</option>
                    <option value="3">3개월</option>
                    <option value="6">6개월</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label>카드 비밀번호 앞 2자리</label>
                <input
                  type="password"
                  id="card-password"
                  placeholder="**"
                  maxlength="2"
                />
              </div>
            </div>

            <!-- 계좌이체 폼 -->
            <div id="bank-payment-form" class="hidden">
              <h3 style="margin: 30px 0 20px 0">🏦 계좌이체 정보</h3>
              <div class="form-group">
                <label>은행 선택</label>
                <select id="bank-select">
                  <option value="">은행을 선택해주세요</option>
                  <option value="kb">KB국민은행</option>
                  <option value="shinhan">신한은행</option>
                  <option value="woori">우리은행</option>
                  <option value="hana">하나은행</option>
                  <option value="nh">NH농협은행</option>
                </select>
              </div>
              <div class="form-group">
                <label>계좌번호</label>
                <input
                  type="text"
                  id="account-number"
                  placeholder="계좌번호를 입력해주세요"
                />
              </div>
              <div class="form-group">
                <label>예금주명</label>
                <input
                  type="text"
                  id="account-holder"
                  placeholder="예금주명을 입력해주세요"
                />
              </div>
            </div>

            <div
              style="
                background: #fff3cd;
                padding: 15px;
                border-radius: 8px;
                margin: 20px 0;
              "
            >
              <div
                style="display: flex; align-items: center; margin-bottom: 10px"
              >
                <input
                  type="checkbox"
                  id="agree-terms"
                  style="margin-right: 10px"
                />
                <label for="agree-terms"
                  >결제 진행 및 개인정보 수집·이용에 동의합니다.</label
                >
              </div>
              <div style="display: flex; align-items: center">
                <input
                  type="checkbox"
                  id="agree-marketing"
                  style="margin-right: 10px"
                />
                <label for="agree-marketing"
                  >마케팅 정보 수신에 동의합니다. (선택)</label
                >
              </div>
            </div>

            <button
              class="btn"
              onclick="processPayment()"
              id="payment-btn"
              style="
                background: #dc3545;
                font-size: 1.2rem;
                padding: 18px;
                margin-top: 20px;
                position: relative;
                z-index: 999;
                pointer-events: auto;
                cursor: pointer;
              "
            >
              🔒 9,000원 결제하기
            </button>
            <button
              class="btn"
              onclick="goBackToOrder()"
              style="background: #6c757d; margin-top: 10px"
            >
              ← 주문 정보 수정
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      let selectedTemplate = null;
      let selectedInfluencer = null;
      let customerPhotos = [];
      let influencerPhotos = [];
      let currentUserType = null;
      let selectedThemes = new Set();

      // 인플루언서 데이터
      const influencerData = [
        {
          id: "danaka",
          name: "다나카",
          image: "assets/influencers/danaka.png",
          description: "귀여운 스타일의 전문가",
        },
        {
          id: "mijo",
          name: "짐미조",
          image: "assets/influencers/mijo.png",
          description: "트렌디한 감성의 크리에이터",
        },
        {
          id: "sabae",
          name: "이사배",
          image: "assets/influencers/sabae.png",
          description: "세련된 컨셉의 인플루언서",
        },
      ];

      // 테마 데이터
      const themeData = [
        {
          id: "night",
          name: "야경",
          image: "assets/background/night.png",
          description: "로맨틱한 야경 배경",
        },
        {
          id: "basic",
          name: "인생네컷",
          image: "assets/background/basic.png",
          description: "클래식한 인생네컷 스타일",
        },
        {
          id: "amusement",
          name: "놀이공원",
          image: "assets/background/amusement.jpg",
          description: "즐거운 놀이공원 테마",
        },
      ];

      // 템플릿 데이터 (각 인플루언서별)
      const templateData = [
        {
          id: "night_template",
          name: "야경 템플릿",
          image: "assets/templates/night.jpeg",
          influencer: "danaka",
          theme: "night",
        },
        {
          id: "basic_template",
          name: "인생네컷 템플릿",
          image: "assets/templates/basic.png",
          influencer: "mijo",
          theme: "basic",
        },
        {
          id: "amusement_template",
          name: "놀이공원 템플릿",
          image: "assets/templates/amusement.jpeg",
          influencer: "sabae",
          theme: "amusement",
        },
      ];

      // 화면 전환 함수들
      function showLogin() {
        hideAllScreens();
        document.getElementById("login-screen").classList.remove("hidden");
      }

      function showSignup() {
        hideAllScreens();
        document.getElementById("signup-screen").classList.remove("hidden");
      }

      function showMainScreen() {
        hideAllScreens();
        document.getElementById("main-screen").classList.remove("hidden");
        loadMainContent();
      }

      function showInfluencerFlow() {
        hideAllScreens();
        document.getElementById("influencer-flow").classList.remove("hidden");
        resetInfluencerFlow();
      }

      function showCustomerFlow() {
        hideAllScreens();
        document.getElementById("customer-flow").classList.remove("hidden");
        resetCustomerFlow();
        loadInfluencerSelection();
      }

      function showInfluencerMain() {
        hideAllScreens();
        document.getElementById("main-screen").classList.remove("hidden");
        loadMainContent();
      }

      function showInfluencerStatistics() {
        hideAllScreens();
        document
          .getElementById("influencer-statistics")
          .classList.remove("hidden");
      }

      function showInfluencerProfile() {
        hideAllScreens();
        document
          .getElementById("influencer-profile")
          .classList.remove("hidden");
      }

      function hideAllScreens() {
        document.querySelectorAll(".container > div").forEach((screen) => {
          screen.classList.add("hidden");
        });
      }

      // Photo Modal Functions
      function openPhotoModal(
        imageSrc,
        title = "AI 네컷사진",
        description = "클릭하여 확대된 이미지를 확인하세요"
      ) {
        const modal = document.getElementById("photoModal");
        const modalImage = document.getElementById("modalImage");
        const modalTitle = document.getElementById("modalTitle");
        const modalDescription = document.getElementById("modalDescription");

        modalImage.src = imageSrc;
        modalImage.alt = title;
        modalTitle.textContent = title;
        modalDescription.textContent = description;

        modal.classList.add("show");
        document.body.style.overflow = "hidden"; // Prevent background scrolling
      }

      function closePhotoModal(event) {
        // Close only if clicking outside the modal content or on close button
        if (
          !event ||
          event.target.id === "photoModal" ||
          event.target.classList.contains("modal-close") ||
          event.target.innerHTML === "&times;"
        ) {
          const modal = document.getElementById("photoModal");
          modal.classList.remove("show");
          document.body.style.overflow = "auto"; // Restore scrolling
        }
      }

      // Keyboard support for modal
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape") {
          closePhotoModal();
        }
      });

      // Helper function to make images clickable
      function makeImageClickable(imgElement, title, description) {
        imgElement.classList.add("clickable-photo");
        imgElement.onclick = function () {
          openPhotoModal(imgElement.src, title, description);
        };
      }

      // 로그인/회원가입 로직
      function performLogin() {
        const userType = document.getElementById("login-user-type").value;
        const email = document.getElementById("login-email").value;
        const password = document.getElementById("login-password").value;

        if (!userType || !email || !password) {
          alert("모든 정보를 입력해주세요.");
          return;
        }

        currentUserType = userType;
        alert("로그인되었습니다!");
        showMainScreen();
      }

      function performSignup() {
        const name = document.getElementById("signup-name").value;
        const email = document.getElementById("signup-email").value;
        const password = document.getElementById("signup-password").value;
        const userType = document.getElementById("user-type").value;

        if (!name || !email || !password || !userType) {
          alert("모든 정보를 입력해주세요.");
          return;
        }

        currentUserType = userType;
        alert("회원가입이 완료되었습니다!");
        showMainScreen();
      }

      // 메인 화면 콘텐츠 로드
      function loadMainContent() {
        const mainOptions = document.getElementById("main-options");

        if (currentUserType === "influencer") {
          mainOptions.innerHTML = `
            <div class="option-card" onclick="showInfluencerFlow()">
              <div class="option-icon">✨</div>
              <div class="option-title">새 템플릿 만들기</div>
              <div class="option-desc">
                나만의 독특한 테마로<br />
                새로운 템플릿을 제작하세요
              </div>
            </div>
            <div class="option-card" onclick="showInfluencerStatistics()">
              <div class="option-icon">📊</div>
              <div class="option-title">통계 보기</div>
              <div class="option-desc">
                템플릿별 주문 현황과<br />
                수익을 확인하세요
              </div>
            </div>
            <div class="option-card" onclick="showInfluencerProfile()">
              <div class="option-icon">👤</div>
              <div class="option-title">프로필 설정</div>
              <div class="option-desc">
                고객에게 보여질<br />
                프로필을 꾸며보세요
              </div>
            </div>
          `;
        } else {
          mainOptions.innerHTML = `
            <div class="option-card" onclick="showCustomerFlow()">
              <div class="option-icon">📸</div>
              <div class="option-title">AI 네컷사진 주문</div>
              <div class="option-desc">
                인플루언서의 템플릿을 선택하고<br />
                나만의 AI 네컷사진을 만들어보세요
              </div>
            </div>
          `;
        }
      }

      // 인플루언서 템플릿 생성 플로우 초기화
      function resetInfluencerFlow() {
        // 모든 단계 숨기기
        document.querySelectorAll("#influencer-flow > div").forEach((step) => {
          step.classList.add("hidden");
        });
        // 바로 테마 선택 단계로
        document.getElementById("influencer-step3").classList.remove("hidden");
        selectedThemes.clear();
        loadThemeSelection();
      }

      function loadThemeSelection() {
        const grid = document.getElementById("theme-selection-grid");
        grid.innerHTML = themeData
          .map(
            (theme) => `
          <div class="template-card theme-card" onclick="toggleThemeSelection('${theme.id}')">
            <div class="selection-indicator">✓</div>
            <img src="${theme.image}" alt="${theme.name}" class="theme-image clickable-photo" 
                 style="cursor: pointer;" 
                 onclick="event.stopPropagation(); openPhotoModal('${theme.image}', '${theme.name} 테마', '${theme.description}')" 
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
            <div style="display: none; width: 100%; height: 160px; background: #F3F4F6; border-radius: 12px; margin-bottom: 16px; border: 1px solid #E5E7EB; align-items: center; justify-content: center; color: #6B7280; font-weight: 500; font-size: 0.9rem;">${theme.name}</div>
            <div style="font-weight: 500; margin-bottom: 8px;">${theme.name}</div>
            <div style="color: #666; font-size: 0.85rem;">${theme.description}</div>
            <div class="request-field">
              <textarea placeholder="이 테마에 대한 특별한 요청사항이 있다면 적어주세요..." id="request-${theme.id}"></textarea>
            </div>
          </div>
        `
          )
          .join("");
      }

      function toggleThemeSelection(themeId) {
        const card = event.currentTarget;

        if (selectedThemes.has(themeId)) {
          selectedThemes.delete(themeId);
          card.classList.remove("multi-selected");
        } else {
          selectedThemes.add(themeId);
          card.classList.add("multi-selected");
        }

        document.getElementById("generate-templates-btn").disabled =
          selectedThemes.size === 0;
      }

      function generateSelectedTemplates() {
        if (selectedThemes.size === 0) {
          alert("최소 하나의 테마를 선택해주세요.");
          return;
        }

        const requests = {};
        selectedThemes.forEach((themeId) => {
          const textarea = document.getElementById(`request-${themeId}`);
          if (textarea.value.trim()) {
            requests[themeId] = textarea.value.trim();
          }
        });

        // AI 생성 시뮬레이션
        showTemplateGenerationProgress();

        setTimeout(() => {
          showGeneratedTemplates();
          goToInfluencerStep4();
        }, 3000);
      }

      function showTemplateGenerationProgress() {
        const step3 = document.getElementById("influencer-step3");
        step3.innerHTML = `
          <div style="text-align: center; padding: 60px 20px;">
            <div style="font-size: 3rem; margin-bottom: 20px; animation: spin 1s linear infinite;">✨</div>
            <h2>AI가 당신만의 템플릿을 생성하고 있어요...</h2>
            <p style="color: #666; margin: 15px 0; font-size: 1.1rem;">선택하신 테마들을 바탕으로 완벽한 템플릿을 만들고 있습니다!</p>
            <div style="width: 200px; height: 4px; background: #e2e8f0; border-radius: 2px; margin: 20px auto; overflow: hidden;">
              <div style="width: 100%; height: 100%; background: #3B82F6; border-radius: 2px; animation: progress 3s ease-in-out;"></div>
            </div>
          </div>
        `;
      }

      function showGeneratedTemplates() {
        const step3 = document.getElementById("influencer-step3");
        const selectedThemeList = Array.from(selectedThemes);

        const templatePreviews = selectedThemeList
          .map((themeId) => {
            const themeInfo = themeData.find((t) => t.id === themeId);
            const templateInfo = templateData.find((t) => t.theme === themeId);
            const imagePath = templateInfo
              ? templateInfo.image
              : `templates/${themeId}.jpeg`;

            console.log(
              `Theme: ${themeId}, Template Info:`,
              templateInfo,
              `Image Path: ${imagePath}`
            );

            return `
            <div style="text-align: center; margin: 20px;">
              <img src="${imagePath}" alt="${themeId} 템플릿" 
                   style="max-width: 200px; height: auto; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.1); border: 1px solid #e2e8f0;"
                   onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" 
                   onload="console.log('이미지 로드 성공: ${imagePath}')" />
              <div style="display: none; width: 200px; height: 150px; background: #F3F4F6; border-radius: 12px; border: 1px solid #E5E7EB; align-items: center; justify-content: center; color: #6B7280; font-weight: 500; flex-direction: column;">
                <div>📷</div>
                <div style="margin-top: 8px; font-size: 0.9rem;">${
                  themeInfo?.name || themeId
                }</div>
                <div style="font-size: 0.7rem; opacity: 0.7; margin-top: 4px;">템플릿</div>
              </div>
              <h4 style="margin-top: 12px; color: #2d3748;">${
                themeInfo?.name || themeId
              } 템플릿</h4>
            </div>
          `;
          })
          .join("");

        step3.innerHTML = `
          <h2>🎉 템플릿 생성 완료!</h2>
          <p style="color: #666; margin-bottom: 30px; text-align: center;">선택하신 테마들로 멋진 템플릿이 완성되었어요!</p>
          <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; margin: 30px 0;">
            ${templatePreviews}
          </div>
          <div style="text-align: center;">
            <button class="btn" onclick="goToInfluencerStep4()" style="background: #3B82F6; font-size: 1.1rem; padding: 14px 28px;">
              템플릿 등록하고 피드백 받기
            </button>
          </div>
        `;
      }

      // 고객 플로우 관련 함수들
      function resetCustomerFlow() {
        // 모든 고객 단계 숨기기
        document.querySelectorAll("#customer-flow > div").forEach((step) => {
          if (step.id.startsWith("customer-step")) {
            step.classList.add("hidden");
          }
        });
        document.getElementById("customer-step1").classList.remove("hidden");
        selectedInfluencer = null;
        selectedTemplate = null;
      }

      function loadInfluencerSelection() {
        const grid = document.getElementById("influencer-selection-grid");
        grid.innerHTML = influencerData
          .map(
            (influencer) => `
          <div class="template-card" onclick="selectInfluencer('${influencer.id}')">
            <img src="${influencer.image}" alt="${influencer.name}" class="theme-image" />
            <div style="font-weight: 500;">${influencer.name}</div>
            <div style="color: #666; font-size: 0.85rem;">${influencer.description}</div>
          </div>
        `
          )
          .join("");
      }

      function selectInfluencer(influencerId) {
        // 기존 선택 해제
        document
          .querySelectorAll("#influencer-selection-grid .template-card")
          .forEach((card) => {
            card.classList.remove("selected");
          });

        // 새로운 선택
        event.currentTarget.classList.add("selected");
        selectedInfluencer = influencerId;

        // 인플루언서 정보 업데이트
        const influencer = influencerData.find(
          (inf) => inf.id === influencerId
        );
        if (influencer) {
          updateInfluencerInfo(influencer);
        }

        document.getElementById("influencer-next-btn").disabled = false;
      }

      function updateInfluencerInfo(influencer) {
        // 인플루언서 정보 업데이트
        document.getElementById("selected-influencer-name").textContent =
          influencer.name;
        document.getElementById("selected-influencer-description").textContent =
          influencer.description;

        // 커버 이미지 설정 (Sabae는 특별한 커버 이미지 사용)
        const coverImage = document.getElementById("influencer-cover");
        if (influencer.id === "sabae") {
          coverImage.src = "assets/cover/cover_sabae.png";
          coverImage.alt = influencer.name + " 커버 이미지";
        } else {
          // 다른 인플루언서들도 커버 이미지가 있다면 사용
          coverImage.src = influencer.image;
          coverImage.alt = influencer.name;
        }
      }

      function loadCustomerTemplates() {
        if (!selectedInfluencer) return;

        const grid = document.getElementById("customer-template-grid");
        // 모든 템플릿을 보여주되, 선택한 인플루언서 정보 표시
        const selectedInfluencerName = influencerData.find(
          (inf) => inf.id === selectedInfluencer
        )?.name;

        grid.innerHTML = templateData
          .map(
            (template, index) => `
          <div class="template-card" onclick="selectTemplate('${template.id}')">
            <img src="${template.image}" alt="${template.name}" class="theme-image clickable-photo" 
                 style="cursor: pointer;" 
                 onclick="event.stopPropagation(); openPhotoModal('${template.image}', '${template.name}', '${selectedInfluencerName}의 ${template.name} 템플릿 미리보기')" 
                 onerror="console.log('고객 템플릿 이미지 로드 실패: ${template.image}'); this.style.display='none'; this.nextElementSibling.style.display='flex';"
                 onload="console.log('고객 템플릿 이미지 로드 성공: ${template.image}')" />
            <div style="display: none; width: 100%; height: 160px; background: #F3F4F6; border-radius: 12px; border: 1px solid #E5E7EB; align-items: center; justify-content: center; color: #6B7280; font-weight: 500; flex-direction: column; margin-bottom: 16px;">
              <div>📷</div>
              <div style="margin-top: 8px; font-size: 0.9rem;">${template.name}</div>
            </div>
            <div style="font-weight: 500;">${template.name}</div>
            <div style="color: #666; font-size: 0.85rem;">with ${selectedInfluencerName}</div>
          </div>
        `
          )
          .join("");
      }

      // 태그 토글 함수
      function toggleTag(button) {
        button.classList.toggle("selected");
      }

      function saveProfile() {
        alert("프로필이 저장되었습니다!");
      }

      function updatePreview() {
        const name = document.getElementById("influencer-profile-name").value;
        const bio = document.getElementById("influencer-bio").value;

        document.getElementById("preview-name").textContent = name || "김인플";
        document.getElementById("preview-bio").textContent =
          bio || "안녕하세요! 트렌디한 포토카드를 만들어드리는 김인플입니다 ✨";
      }

      function changeThemeColor(gradient) {
        // 모든 색상 원들의 테두리 초기화
        document
          .querySelectorAll('[onclick*="changeThemeColor"]')
          .forEach((el) => {
            el.style.border = "3px solid transparent";
          });

        // 선택된 색상에 테두리 추가
        event.currentTarget.style.border = "3px solid rgba(102, 126, 234, 0.8)";
        event.currentTarget.style.boxShadow =
          "0 2px 8px rgba(102, 126, 234, 0.3)";

        // 미리보기 업데이트
        const previewCard = document.querySelector(
          "#influencer-profile .gradient-card"
        );
        if (previewCard) {
          previewCard.style.background = gradient;
        }
      }

      function previewProfile() {
        alert("프로필 미리보기를 새 창에서 열겠습니다!");
      }

      // 인플루언서 플로우 함수들
      function goToInfluencerStep2() {
        const name = document.getElementById("influencer-name").value;
        const phone = document.getElementById("influencer-phone").value;
        const email = document.getElementById("influencer-email").value;

        if (!name || !phone || !email) {
          alert("모든 정보를 입력해주세요.");
          return;
        }

        document.getElementById("influencer-step1").classList.add("hidden");
        document.getElementById("influencer-step2").classList.remove("hidden");
      }

      function toggleUploadMethod() {
        const method = document.getElementById("upload-method").value;
        const snsSection = document.getElementById("sns-section");
        const photoSection = document.getElementById("photo-section");
        const nextBtn = document.getElementById("step2-next-btn");

        snsSection.classList.add("hidden");
        photoSection.classList.add("hidden");
        nextBtn.disabled = true;

        if (method === "sns") {
          snsSection.classList.remove("hidden");
        } else if (method === "photo") {
          photoSection.classList.remove("hidden");
        }
      }

      function checkStep2Completion() {
        const method = document.getElementById("upload-method").value;
        const nextBtn = document.getElementById("step2-next-btn");

        if (method === "sns") {
          const platform = document.getElementById("sns-platform").value;
          const snsId = document.getElementById("sns-id").value;
          nextBtn.disabled = !(platform && snsId);
        } else if (method === "photo") {
          nextBtn.disabled = influencerPhotos.length === 0;
        } else {
          nextBtn.disabled = true;
        }
      }

      function handlePhotoUpload(event) {
        const files = event.target.files;
        const container = document.getElementById("uploaded-photos");
        const nextBtn = document.getElementById("step2-next-btn");

        influencerPhotos = [];
        container.innerHTML = "";

        for (let file of files) {
          influencerPhotos.push(file);
          const img = document.createElement("img");
          img.src = URL.createObjectURL(file);
          img.className = "uploaded-photo";
          container.appendChild(img);
        }

        if (influencerPhotos.length > 0) {
          nextBtn.disabled = false;
        }

        checkStep2Completion();
      }

      function goToInfluencerStep3() {
        document.getElementById("influencer-step2").classList.add("hidden");
        document.getElementById("influencer-step3").classList.remove("hidden");
        loadThemeSelection();
      }

      function toggleTemplateMethod() {
        const method = document.getElementById("template-method").value;
        const aiSection = document.getElementById("ai-generation");
        const customSection = document.getElementById("custom-creation");

        aiSection.classList.add("hidden");
        customSection.classList.add("hidden");

        if (method === "ai") {
          aiSection.classList.remove("hidden");
        } else if (method === "custom") {
          customSection.classList.remove("hidden");
        }
      }

      function generateAITemplate() {
        const style = document.getElementById("template-style").value;
        if (!style) {
          alert("템플릿 스타일을 선택해주세요.");
          return;
        }

        // AI 생성 시뮬레이션
        setTimeout(() => {
          document.getElementById("ai-result").classList.remove("hidden");
          alert("AI 템플릿이 생성되었습니다!");
        }, 2000);
      }

      function goToInfluencerStep4() {
        document.getElementById("influencer-step3").classList.add("hidden");
        document.getElementById("influencer-step4").classList.remove("hidden");

        // 생성된 템플릿 미리보기 표시
        showInfluencerTemplatePreview();
      }

      function showInfluencerTemplatePreview() {
        const step4 = document.getElementById("influencer-step4");
        const selectedThemeList = Array.from(selectedThemes);

        const templatePreviews = selectedThemeList
          .map((themeId) => {
            const themeInfo = themeData.find((t) => t.id === themeId);

            // 정확한 이미지 경로 매핑
            let imagePath;
            if (themeId === "amusement") {
              imagePath = "assets/templates/amusement.jpeg";
            } else if (themeId === "night") {
              imagePath = "assets/templates/night.jpeg";
            } else if (themeId === "basic") {
              imagePath = "assets/templates/basic.png";
            } else {
              imagePath = `assets/templates/${themeId}.jpeg`;
            }

            console.log(`Theme: ${themeId}, Image Path: ${imagePath}`);

            return `
            <div style="text-align: center; margin: 15px;">
              <img src="${imagePath}" alt="${themeId} 템플릿" 
                   style="max-width: 180px; height: auto; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.1); border: 1px solid #e2e8f0;"
                   onerror="console.log('이미지 로드 실패: ${imagePath}'); this.style.display='none'; this.nextElementSibling.style.display='flex';"
                   onload="console.log('이미지 로드 성공: ${imagePath}')" />
              <div style="display: none; width: 180px; height: 135px; background: #F3F4F6; border-radius: 12px; border: 1px solid #E5E7EB; align-items: center; justify-content: center; color: #6B7280; font-weight: 500; flex-direction: column;">
                <div>📷</div>
                <div style="margin-top: 8px; font-size: 0.9rem;">${
                  themeInfo?.name || themeId
                }</div>
                <div style="font-size: 0.7rem; opacity: 0.7; margin-top: 4px;">템플릿</div>
              </div>
              <h4 style="margin-top: 10px; color: #2d3748; font-size: 0.9rem;">${
                themeInfo?.name || themeId
              } 템플릿</h4>
            </div>
          `;
          })
          .join("");

        step4.innerHTML = `
          <h2>🎨 생성된 템플릿 확인</h2>
          <p style="color: #666; margin-bottom: 20px; text-align: center;">AI가 생성한 템플릿을 확인하고 피드백을 제공해주세요</p>
          
          <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; background: #f8f9fa; border-radius: 12px; margin-bottom: 30px;">
            ${templatePreviews}
          </div>
          
          <div class="feedback-section">
            <div class="form-group">
              <label>템플릿에 대한 피드백</label>
              <textarea
                id="template-feedback"
                rows="4"
                placeholder="템플릿 개선사항이나 요청사항을 자세히 적어주세요..."
              ></textarea>
            </div>
            <div class="form-group">
              <label>만족도</label>
              <select id="satisfaction">
                <option value="">선택해주세요</option>
                <option value="5">매우 만족</option>
                <option value="4">만족</option>
                <option value="3">보통</option>
                <option value="2">불만족</option>
                <option value="1">매우 불만족</option>
              </select>
            </div>
            <button class="btn" onclick="submitFeedback()">피드백 제출</button>
            <button
              class="btn"
              onclick="registerTemplate()"
              style="background: #3B82F6; margin-top: 10px"
            >
              템플릿 등록하기
            </button>
          </div>
        `;
      }

      function submitFeedback() {
        const feedback = document.getElementById("template-feedback").value;
        const satisfaction = document.getElementById("satisfaction").value;

        if (!feedback || !satisfaction) {
          alert("피드백과 만족도를 모두 입력해주세요.");
          return;
        }

        // 피드백 처리 중 메시지 표시
        const feedbackSection = document.querySelector(".feedback-section");
        feedbackSection.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 2rem; margin-bottom: 20px;">🔄</div>
                    <h3>피드백을 반영하여 템플릿을 재생성하고 있습니다...</h3>
                    <p style="color: #666; margin-top: 10px;">잠시만 기다려주세요.</p>
                </div>
            `;

        // 3초 후 새로운 템플릿 표시
        setTimeout(() => {
          showRegeneratedTemplate();
        }, 3000);
      }

      function showRegeneratedTemplate() {
        const feedbackSection = document.querySelector(".feedback-section");
        const selectedThemeList = Array.from(selectedThemes);

        const templatePreviews = selectedThemeList
          .map((themeId) => {
            const themeInfo = themeData.find((t) => t.id === themeId);

            // 정확한 이미지 경로 매핑
            let imagePath;
            if (themeId === "amusement") {
              imagePath = "assets/templates/amusement.jpeg";
            } else if (themeId === "night") {
              imagePath = "assets/templates/night.jpeg";
            } else if (themeId === "basic") {
              imagePath = "assets/templates/basic.png";
            } else {
              imagePath = `assets/templates/${themeId}.jpeg`;
            }

            return `
            <div style="text-align: center; margin: 15px;">
              <img src="${imagePath}" alt="${themeId} 템플릿" 
                   style="max-width: 180px; height: auto; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.1); border: 1px solid #e2e8f0;"
                   onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
              <div style="display: none; width: 180px; height: 135px; background: #F3F4F6; border-radius: 12px; border: 1px solid #E5E7EB; align-items: center; justify-content: center; color: #6B7280; font-weight: 500; flex-direction: column;">
                <div>📷</div>
                <div style="margin-top: 8px; font-size: 0.9rem;">${
                  themeInfo?.name || themeId
                }</div>
                <div style="font-size: 0.7rem; opacity: 0.7; margin-top: 4px;">개선된 템플릿</div>
              </div>
              <h4 style="margin-top: 10px; color: #2d3748; font-size: 0.9rem;">${
                themeInfo?.name || themeId
              } 템플릿</h4>
            </div>
          `;
          })
          .join("");

        feedbackSection.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px;">🎉 개선된 템플릿</h3>
                <div class="sample-result" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; background: #f8f9fa; border-radius: 12px;">
                    ${templatePreviews}
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <div style="background: #d4edda; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <strong>개선사항:</strong><br>
                        • 피드백을 바탕으로 색상 조정<br>
                        • 레이아웃 최적화<br>
                        • 더욱 자연스러운 표현
                    </div>
                    <button class="btn" onclick="providMoreFeedback()" style="background: #F59E0B; color: #000; margin-right: 10px;">추가 피드백</button>
                    <button class="btn" onclick="finalizeTemplate()" style="background: #3B82F6;">최종 승인</button>
                </div>
            `;
      }

      function providMoreFeedback() {
        const feedbackSection = document.querySelector(".feedback-section");
        feedbackSection.innerHTML = `
                <h3>추가 피드백 제공</h3>
                <div class="form-group">
                    <label>추가 개선사항</label>
                    <textarea id="additional-feedback" rows="4" placeholder="추가로 수정하고 싶은 부분이나 개선사항을 적어주세요..."></textarea>
                </div>
                <div class="form-group">
                    <label>현재 만족도</label>
                    <select id="new-satisfaction">
                        <option value="">선택해주세요</option>
                        <option value="5">매우 만족</option>
                        <option value="4">만족</option>
                        <option value="3">보통</option>
                        <option value="2">불만족</option>
                        <option value="1">매우 불만족</option>
                    </select>
                </div>
                <button class="btn" onclick="submitAdditionalFeedback()">추가 피드백 제출</button>
                <button class="btn" onclick="showRegeneratedTemplate()" style="background: #6c757d; margin-top: 10px;">이전 템플릿으로 돌아가기</button>
            `;
      }

      function submitAdditionalFeedback() {
        const feedback = document.getElementById("additional-feedback").value;
        const satisfaction = document.getElementById("new-satisfaction").value;

        if (!feedback || !satisfaction) {
          alert("추가 피드백과 만족도를 모두 입력해주세요.");
          return;
        }

        // 재생성 과정 표시
        const feedbackSection = document.querySelector(".feedback-section");
        feedbackSection.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 2rem; margin-bottom: 20px;">🎨</div>
                    <h3>추가 피드백을 반영하여 최종 템플릿을 생성하고 있습니다...</h3>
                    <p style="color: #666; margin-top: 10px;">고품질 템플릿 생성 중...</p>
                </div>
            `;

        // 4초 후 최종 템플릿 표시
        setTimeout(() => {
          showFinalTemplate();
        }, 4000);
      }

      function showFinalTemplate() {
        const feedbackSection = document.querySelector(".feedback-section");
        feedbackSection.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px;">✨ 최종 완성 템플릿</h3>
                <div class="sample-result">
                    <div style="background: #3B82F6; height: 400px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.2rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); position: relative;">
                        <div style="text-align: center;">
                            완벽한 4컷 템플릿<br>
                            🌟 최종 버전 🌟<br>
                            <small style="opacity: 0.8;">피드백 완전 반영</small>
                        </div>
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem;">
                            FINAL
                        </div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <div style="background: #d1ecf1; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <strong>🎉 템플릿 완성!</strong><br>
                        모든 피드백이 반영된 최종 템플릿입니다.<br>
                        이제 웹사이트에 등록할 수 있습니다.
                    </div>
                    <button class="btn" onclick="providMoreFeedback()" style="background: #17a2b8; margin-right: 10px;">미세 조정</button>
                    <button class="btn" onclick="registerTemplate()" style="background: #3B82F6;">웹사이트에 등록</button>
                </div>
            `;
      }

      function finalizeTemplate() {
        const feedbackSection = document.querySelector(".feedback-section");
        feedbackSection.innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <div style="font-size: 3rem; margin-bottom: 20px;">✅</div>
                    <h3>템플릿이 최종 승인되었습니다!</h3>
                    <p style="color: #666; margin: 15px 0;">고객들이 선택할 수 있도록 웹사이트에 등록하시겠습니까?</p>
                    <button class="btn" onclick="registerTemplate()" style="background: #3B82F6;">웹사이트에 등록하기</button>
                </div>
            `;
      }

      function registerTemplate() {
        alert(
          "템플릿이 등록되었습니다! 웹사이트에서 고객들이 선택할 수 있게 됩니다."
        );
      }

      // 고객 플로우 함수들 업데이트
      function selectTemplate(templateId) {
        // 기존 선택 해제
        document
          .querySelectorAll("#customer-template-grid .template-card")
          .forEach((card) => {
            card.classList.remove("selected");
          });

        // 새로운 선택
        event.target.closest(".template-card").classList.add("selected");
        selectedTemplate = templateId;
        document.getElementById("template-next-btn").disabled = false;
      }

      function goToCustomerStep2() {
        if (!selectedInfluencer) {
          alert("인플루언서를 선택해주세요.");
          return;
        }

        document.getElementById("customer-step1").classList.add("hidden");
        document.getElementById("customer-step2").classList.remove("hidden");
        loadCustomerTemplates();
      }

      function goToCustomerStep3() {
        if (!selectedTemplate) {
          alert("템플릿을 선택해주세요.");
          return;
        }

        // 결제 정보 업데이트
        updatePaymentInfo();

        document.getElementById("customer-step2").classList.add("hidden");
        document.getElementById("customer-step3").classList.remove("hidden");
      }

      function updatePaymentInfo() {
        const influencerName =
          influencerData.find((inf) => inf.id === selectedInfluencer)?.name ||
          "-";
        const templateObj = templateData.find(
          (template) => template.id === selectedTemplate
        );
        const templateName = templateObj?.name || "-";

        document.getElementById("payment-influencer").textContent =
          influencerName;
        document.getElementById("payment-template").textContent = templateName;
      }

      function proceedToPhotoUpload() {
        console.log("proceedToPhotoUpload 함수 호출됨");

        // 결제 처리 시뮬레이션
        const btn = document.getElementById("payment-proceed-btn");
        if (btn) {
          btn.innerHTML = "결제 처리 중...";
          btn.disabled = true;
          console.log("버튼 상태 변경됨");
        } else {
          console.log("payment-proceed-btn 버튼을 찾을 수 없음");
        }

        setTimeout(() => {
          alert("결제가 완료되었습니다! 이제 사진을 업로드해주세요.");
          document.getElementById("customer-step3").classList.add("hidden");
          document.getElementById("customer-step4").classList.remove("hidden");
          console.log("사진 업로드 화면으로 전환됨");
        }, 2000);
      }

      function handleCustomerPhotoUpload(event) {
        const files = event.target.files;
        const container = document.getElementById("customer-uploaded-photos");
        const nextBtn = document.getElementById("customer-photo-next-btn");

        customerPhotos = [];
        container.innerHTML = "";

        for (let file of files) {
          customerPhotos.push(file);
          const img = document.createElement("img");
          img.src = URL.createObjectURL(file);
          img.className = "uploaded-photo";
          container.appendChild(img);
        }

        if (customerPhotos.length >= 3 && customerPhotos.length <= 5) {
          nextBtn.disabled = false;
        } else {
          nextBtn.disabled = true;
          if (customerPhotos.length > 0) {
            alert("3-5장의 사진을 업로드해주세요.");
          }
        }
      }

      function goToCustomerStep4() {
        // 현재는 4단계가 없으므로 바로 5단계로
        goToCustomerStep5();
      }

      function goToCustomerStep5() {
        if (customerPhotos.length < 3 || customerPhotos.length > 5) {
          alert("3-5장의 사진을 업로드해주세요.");
          return;
        }

        // AI 생성 시뮬레이션
        document.getElementById("customer-step4").classList.add("hidden");
        showAIGenerationProgress();

        setTimeout(() => {
          showGeneratedSample();
          document.getElementById("customer-step5").classList.remove("hidden");
        }, 3000);
      }

      function showAIGenerationProgress() {
        const step5 = document.getElementById("customer-step5");
        step5.classList.remove("hidden");
        step5.innerHTML = `
          <div style="text-align: center; padding: 60px 20px;">
            <div style="font-size: 3rem; margin-bottom: 20px; animation: spin 1s linear infinite;">🎨</div>
            <h2>AI가 당신만의 네컷사진을 생성하고 있어요...</h2>
            <p style="color: #666; margin: 15px 0; font-size: 1.1rem;">잠시만 기다려주세요. 완벽한 포토카드를 만들고 있습니다!</p>
            <div style="width: 200px; height: 4px; background: #e2e8f0; border-radius: 2px; margin: 20px auto; overflow: hidden;">
              <div style="width: 100%; height: 100%; background: #3B82F6; border-radius: 2px; animation: progress 3s ease-in-out;"></div>
            </div>
          </div>
          <style>
            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
            @keyframes progress { 0% { transform: translateX(-100%); } 100% { transform: translateX(0%); } }
          </style>
        `;
      }

      function showGeneratedSample() {
        const templateObj = templateData.find(
          (template) => template.id === selectedTemplate
        );
        const themeName = templateObj ? templateObj.theme : "basic";

        // 테마별 정확한 파일 확장자 매핑
        let imageExtension = ".jpeg";
        if (themeName === "basic") {
          imageExtension = ".png";
        }

        generatedImagePath = `assets/generated_images/${themeName}${imageExtension}`;
        console.log(`Generated image path: ${generatedImagePath}`);

        const step5 = document.getElementById("customer-step5");
        step5.innerHTML = `
          <h2>✨ AI 네컷사진 완성!</h2>
          <div class="sample-result" style="text-align: center; margin: 30px 0;">
            <img src="${generatedImagePath}" alt="생성된 AI 네컷사진" class="clickable-photo" style="max-width: 100%; height: auto; border-radius: 16px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; cursor: pointer;" onclick="openPhotoModal('${generatedImagePath}', 'AI 네컷사진 완성', '선택하신 ${
          templateObj?.name || "템플릿"
        }으로 제작된 AI 네컷사진입니다')" />
            <p style="color: #666; margin-top: 16px; font-size: 0.9rem;">선택하신 ${
              templateObj?.name || "템플릿"
            }으로 제작된 AI 네컷사진입니다 <span style="color: #3B82F6; font-weight: 500;">(클릭하여 확대)</span></p>
          </div>
          <div style="display: flex; gap: 12px; justify-content: center; margin-top: 24px;">
            <button class="btn" onclick="goToCustomerStep6()" style="background: #F59E0B; color: #fff;">
              수정 요청하기
            </button>
            <button class="btn" onclick="goToCustomerStep7()" style="background: #3B82F6;">
              이대로 주문하기
            </button>
          </div>
        `;
      }

      function goToCustomerStep6() {
        document.getElementById("customer-step5").classList.add("hidden");
        document.getElementById("customer-step6").classList.remove("hidden");
      }

      function goToCustomerStep7() {
        document.getElementById("customer-step5").classList.add("hidden");
        document.getElementById("customer-step6").classList.add("hidden");
        document.getElementById("customer-step7").classList.remove("hidden");

        // 최종 주문 화면에 생성된 이미지 표시
        displayFinalOrderPhoto();
      }

      function displayFinalOrderPhoto() {
        // 선택된 템플릿에 따라 이미지 경로 결정
        let themeName = "";
        let imageExtension = "";

        if (selectedTemplate) {
          const templateObj = templateData.find(
            (t) => t.id === selectedTemplate
          );
          if (templateObj) {
            themeName = templateObj.theme;
          }
        }

        // 파일 확장자 결정
        if (themeName === "basic") {
          imageExtension = ".png";
        } else {
          imageExtension = ".jpeg";
        }

        const finalImagePath = `assets/generated_images/${themeName}${imageExtension}`;
        const finalPhotoElement = document.getElementById("final-order-photo");

        if (finalPhotoElement) {
          finalPhotoElement.src = finalImagePath;
          finalPhotoElement.onerror = function () {
            console.log("최종 주문 이미지 로드 실패:", finalImagePath);
            // 이미지 로드 실패시 기본 플레이스홀더
            this.style.display = "none";
            this.parentElement.innerHTML = `
              <div style="background: #F3F4F6; border-radius: 16px; padding: 60px; text-align: center; color: #6B7280;">
                <div style="font-size: 3rem; margin-bottom: 16px;">📸</div>
                <div style="font-weight: 600; margin-bottom: 8px;">완성된 AI 네컷사진</div>
                <div style="font-size: 0.9rem;">최종 주문 사진</div>
              </div>
            `;
          };
        }
      }

      function submitCustomerFeedback() {
        const feedback = document.getElementById("customer-feedback").value;
        if (!feedback) {
          alert("피드백을 입력해주세요.");
          return;
        }

        // 피드백 처리 중 메시지 표시
        const feedbackSection = document.querySelector(
          "#customer-step6 .feedback-section"
        );
        feedbackSection.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 2rem; margin-bottom: 20px;">🔄</div>
                    <h3>피드백을 반영하여 포토카드를 재생성하고 있습니다...</h3>
                    <p style="color: #666; margin-top: 10px;">AI가 개선된 결과를 만들고 있어요.</p>
                </div>
            `;

        // 3초 후 개선된 샘플 표시
        setTimeout(() => {
          showImprovedSample();
        }, 3000);
      }

      function showImprovedSample() {
        // Use the same image path that was generated originally
        if (!generatedImagePath) {
          const templateObj = templateData.find(
            (template) => template.id === selectedTemplate
          );
          const themeName = templateObj ? templateObj.theme : "basic";

          // 테마별 정확한 파일 확장자 매핑
          let imageExtension = ".jpeg";
          if (themeName === "basic") {
            imageExtension = ".png";
          }

          generatedImagePath = `assets/generated_images/${themeName}${imageExtension}`;
        }

        const step6 = document.getElementById("customer-step6");
        step6.innerHTML = `
                <h2>🎉 개선된 AI 네컷사진</h2>
                <div class="sample-result" style="text-align: center; margin: 30px 0;">
                    <img src="${generatedImagePath}" alt="개선된 AI 네컷사진" class="clickable-photo" style="max-width: 100%; height: auto; border-radius: 16px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; cursor: pointer;" onclick="openPhotoModal('${generatedImagePath}', '개선된 AI 네컷사진', '피드백이 반영된 개선된 버전입니다')" />
                    <div style="position: relative; display: inline-block;">
                      <div style="position: absolute; top: -10px; right: -10px; background: #3B82F6; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold;">
                        IMPROVED ✨
                      </div>
                    </div>
                    <p style="color: #666; margin-top: 16px; font-size: 0.9rem;">피드백이 반영된 개선된 버전입니다 <span style="color: #3B82F6; font-weight: 500;">(클릭하여 확대)</span></p>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <div style="background: #d4edda; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <strong>개선사항:</strong><br>
                        • 피드백을 바탕으로 얼굴 표현 개선<br>
                        • 더 자연스러운 색감 조정<br>
                        • 템플릿과의 조화 향상
                    </div>
                    <button class="btn" onclick="provideMoreCustomerFeedback()" style="background: #F59E0B; color: #000; margin-right: 10px;">추가 수정 요청</button>
                    <button class="btn" onclick="approveCustomerSample()" style="background: #3B82F6;">이대로 주문하기</button>
                </div>
            `;
      }

      function provideMoreCustomerFeedback() {
        const step6 = document.getElementById("customer-step6");
        step6.innerHTML = `
                <h2>추가 수정 요청</h2>
                <div class="sample-result">
                    <div style="background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%); height: 200px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                        현재 샘플
                    </div>
                </div>
                <div class="feedback-section">
                    <div class="form-group">
                        <label>추가 수정 요청사항</label>
                        <textarea id="additional-customer-feedback" rows="4" placeholder="더 수정하고 싶은 부분을 구체적으로 적어주세요..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>현재 만족도</label>
                        <select id="customer-satisfaction">
                            <option value="">선택해주세요</option>
                            <option value="5">매우 만족</option>
                            <option value="4">만족</option>
                            <option value="3">보통</option>
                            <option value="2">불만족</option>
                            <option value="1">매우 불만족</option>
                        </select>
                    </div>
                    <button class="btn" onclick="submitAdditionalCustomerFeedback()">추가 수정 요청하기</button>
                    <button class="btn" onclick="showImprovedSample()" style="background: #6c757d; margin-top: 10px;">이전 결과로 돌아가기</button>
                </div>
            `;
      }

      function submitAdditionalCustomerFeedback() {
        const feedback = document.getElementById(
          "additional-customer-feedback"
        ).value;
        const satisfaction = document.getElementById(
          "customer-satisfaction"
        ).value;

        if (!feedback || !satisfaction) {
          alert("추가 수정 요청사항과 만족도를 모두 입력해주세요.");
          return;
        }

        // 재생성 과정 표시
        const step4 = document.getElementById("customer-step4");
        step4.innerHTML = `
                <div style="text-align: center; padding: 60px 20px;">
                    <div style="font-size: 2.5rem; margin-bottom: 20px;">🎨</div>
                    <h2>최종 포토카드를 완성하고 있습니다</h2>
                    <p style="color: #666; margin-top: 10px; font-size: 1.1rem;">모든 요청사항을 반영하여 완벽한 결과를 만들고 있어요...</p>
                    <div style="margin-top: 30px;">
                        <div style="width: 200px; height: 4px; background: #e0e0e0; border-radius: 2px; margin: 0 auto; overflow: hidden;">
                            <div style="width: 0%; height: 100%; background: #3B82F6; border-radius: 2px; animation: progress 4s ease-in-out forwards;"></div>
                        </div>
                    </div>
                </div>
                <style>
                    @keyframes progress {
                        0% { width: 0%; }
                        100% { width: 100%; }
                    }
                </style>
            `;

        // 4초 후 최종 결과 표시
        setTimeout(() => {
          showFinalCustomerResult();
        }, 4000);
      }

      function showFinalCustomerResult() {
        const step6 = document.getElementById("customer-step6");
        step6.innerHTML = `
                <h2>🌟 완벽한 포토카드 완성!</h2>
                <div class="sample-result">
                    <div style="background: #3B82F6; height: 200px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.2rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); position: relative;">
                        <div style="text-align: center;">
                            완성된 포토카드<br>
                            🎯 완벽 버전<br>
                            <small style="opacity: 0.8;">모든 피드백 반영</small>
                        </div>
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem;">
                            PERFECT
                        </div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <div style="background: #d1ecf1; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <strong>🎉 최종 완성!</strong><br>
                        모든 수정 요청이 완벽하게 반영되었습니다.<br>
                        이제 4컷 포토카드를 주문하실 수 있습니다.
                    </div>
                    <button class="btn" onclick="provideMoreCustomerFeedback()" style="background: #17a2b8; margin-right: 10px;">미세 조정</button>
                    <button class="btn" onclick="goToCustomerStep7()" style="background: #3B82F6;">4컷 포토카드 주문하기</button>
                </div>
            `;
      }

      function approveCustomerSample() {
        const step6 = document.getElementById("customer-step6");
        step6.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 3rem; margin-bottom: 20px;">✅</div>
                    <h2>샘플이 승인되었습니다!</h2>
                    <p style="color: #666; margin: 15px 0; font-size: 1.1rem;">이제 4컷 포토카드를 제작하여 배송해드리겠습니다.</p>
                    <button class="btn" onclick="goToCustomerStep7()" style="background: #3B82F6; font-size: 1.1rem; padding: 15px 30px;">4컷 포토카드 주문하기</button>
                </div>
            `;
      }

      function goToCustomerStep6() {
        document.getElementById("customer-step5").classList.add("hidden");
        document.getElementById("customer-step6").classList.remove("hidden");
      }

      let selectedPaymentMethod = null;
      let generatedImagePath = null;

      function selectDeliveryMethod(method) {
        const name = document.getElementById("delivery-name").value;
        const phone = document.getElementById("delivery-phone").value;

        if (!name || !phone) {
          alert("받는 분 이름과 연락처를 입력해주세요.");
          return;
        }

        if (method === "shipping") {
          const address = document.getElementById("delivery-address").value;
          if (!address) {
            alert("배송 주소를 입력해주세요.");
            return;
          }

          alert(
            `배송으로 주문이 완료되었습니다!\n\n받는 분: ${name}\n연락처: ${phone}\n주소: ${address}\n\n영업일 기준 2-3일 내 배송 예정입니다.`
          );
        } else if (method === "kakao") {
          alert(
            `카카오톡 전송으로 주문이 완료되었습니다!\n\n받는 분: ${name}\n연락처: ${phone}\n\n고화질 이미지가 카카오톡으로 전송됩니다.`
          );
        }

        // 주문 완료 후 처음으로 돌아가기
        setTimeout(() => {
          showMainScreen();
        }, 2000);
      }

      function proceedToPayment() {
        const name = document.getElementById("delivery-name").value;
        const phone = document.getElementById("delivery-phone").value;
        const address = document.getElementById("delivery-address").value;

        if (!name || !phone || !address) {
          alert("배송 정보를 모두 입력해주세요.");
          return;
        }

        document.getElementById("customer-step6").classList.add("hidden");
        document.getElementById("customer-step7").classList.remove("hidden");

        // 결제 창 진입 시 바로 버튼 활성화
        setTimeout(() => {
          const paymentBtn = document.getElementById("payment-btn");
          if (paymentBtn) {
            paymentBtn.disabled = false;
            paymentBtn.style.backgroundColor = "#dc3545";
            console.log("결제 창 진입 - 버튼 강제 활성화");
          }
        }, 100);
      }

      function goBackToOrder() {
        document.getElementById("customer-step7").classList.add("hidden");
        document.getElementById("customer-step6").classList.remove("hidden");
      }

      function selectPaymentMethod(method, element) {
        console.log(`결제 방법 선택: ${method}`);
        selectedPaymentMethod = method;

        // 모든 결제 방법 선택 해제
        document.querySelectorAll(".payment-method").forEach((el) => {
          el.classList.remove("selected");
          el.style.borderColor = "#ddd";
          el.style.backgroundColor = "white";
        });

        // 선택된 방법 하이라이트
        const paymentElement = element.closest(".payment-method");
        if (paymentElement) {
          paymentElement.classList.add("selected");
          paymentElement.style.borderColor = "#3B82F6";
          paymentElement.style.backgroundColor = "#f0f4ff";
          console.log("결제 방법 하이라이트 완료");
        } else {
          console.log("결제 방법 요소를 찾을 수 없음");
        }

        // 모든 결제 폼 숨기기 (간단화)
        const cardForm = document.getElementById("card-payment-form");
        const bankForm = document.getElementById("bank-payment-form");

        if (cardForm) cardForm.classList.add("hidden");
        if (bankForm) bankForm.classList.add("hidden");
        console.log(`${method} 결제 방법 선택됨 - 세부 폼 없이 바로 진행`);

        checkPaymentForm();
      }

      function formatCardNumber(input) {
        let value = input.value.replace(/\D/g, "");
        let formattedValue = value.replace(/(\d{4})(?=\d)/g, "$1-");
        if (formattedValue.length > 19) {
          formattedValue = formattedValue.substr(0, 19);
        }
        input.value = formattedValue;
        checkPaymentForm();
      }

      function formatExpiry(input) {
        let value = input.value.replace(/\D/g, "");
        if (value.length >= 2) {
          value = value.substr(0, 2) + "/" + value.substr(2, 2);
        }
        input.value = value;
        checkPaymentForm();
      }

      function checkPaymentForm() {
        const paymentBtn = document.getElementById("payment-btn");

        if (!paymentBtn) {
          console.log("결제 버튼을 찾을 수 없습니다");
          return;
        }

        console.log(`Selected payment method: ${selectedPaymentMethod}`);

        // 결제 방법이 선택되었다면 바로 버튼 활성화
        if (selectedPaymentMethod) {
          console.log("결제 방법 선택됨 - 버튼 활성화");
          paymentBtn.disabled = false;
          paymentBtn.style.backgroundColor = "#dc3545";
        } else {
          console.log("결제 방법 미선택 - 버튼 비활성화");
          paymentBtn.disabled = true;
          paymentBtn.style.backgroundColor = "#ccc";
        }
      }

      function processPayment() {
        console.log("processPayment 함수 호출됨");
        console.log("selectedPaymentMethod:", selectedPaymentMethod);

        // 결제 방법 확인을 제거하고 무조건 진행
        // if (!selectedPaymentMethod) {
        //   alert("결제 방법을 선택해주세요.");
        //   return;
        // }

        // 결제 처리 중 화면
        const step7 = document.getElementById("customer-step7");
        step7.innerHTML = `
                <div style="text-align: center; padding: 60px 20px;">
                    <div style="font-size: 3rem; margin-bottom: 20px;">💳</div>
                    <h2>결제 처리 중입니다...</h2>
                    <p style="color: #666; margin: 15px 0; font-size: 1.1rem;">안전한 결제를 위해 잠시만 기다려주세요.</p>
                    <div style="margin-top: 30px;">
                        <div style="width: 250px; height: 6px; background: #e0e0e0; border-radius: 3px; margin: 0 auto; overflow: hidden;">
                            <div style="width: 0%; height: 100%; background: #3B82F6; border-radius: 3px; animation: paymentProgress 3s ease-in-out forwards;"></div>
                        </div>
                        <p style="margin-top: 15px; color: #10B981; font-weight: bold;">결제 승인 중...</p>
                    </div>
                </div>
                <style>
                    @keyframes paymentProgress {
                        0% { width: 0%; }
                        50% { width: 70%; }
                        100% { width: 100%; }
                    }
                </style>
            `;

        // 3초 후 결제 완료 화면
        setTimeout(() => {
          showPaymentComplete();
        }, 3000);
      }

      function showPaymentComplete() {
        const step7 = document.getElementById("customer-step7");
        const orderNumber = "PC" + Date.now().toString().substr(-8);
        const deliveryDate = new Date(
          Date.now() + 2 * 24 * 60 * 60 * 1000
        ).toLocaleDateString("ko-KR");

        step7.innerHTML = `
                <div style="text-align: center; padding: 40px 20px;">
                    <div style="font-size: 4rem; margin-bottom: 20px;">🎉</div>
                    <h2 style="color: #10B981; margin-bottom: 20px;">결제가 완료되었습니다!</h2>
                    
                    <div style="background: #d4edda; padding: 25px; border-radius: 15px; margin: 30px 0; text-align: left;">
                        <h3 style="color: #155724; margin-bottom: 15px; text-align: center;">📋 주문 확인서</h3>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span><strong>주문번호:</strong></span>
                            <span>${orderNumber}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span><strong>상품명:</strong></span>
                            <span>4컷 포토카드</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span><strong>결제금액:</strong></span>
                            <span style="color: #dc3545; font-weight: bold;">9,000원</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span><strong>결제방법:</strong></span>
                            <span>${getPaymentMethodName()}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span><strong>예상 배송일:</strong></span>
                            <span>${deliveryDate}</span>
                        </div>
                        <hr style="margin: 15px 0;">
                        <div style="text-align: center; color: #155724;">
                            <strong>📦 2일 후 배송 시작 예정</strong>
                        </div>
                    </div>
                    
                    <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <h3 style="color: #856404;">📱 주문 알림 서비스</h3>
                        <p style="margin: 10px 0; color: #856404;">
                            • SMS로 제작 진행 상황을 알려드립니다<br>
                            • 배송 시작 시 택배 송장번호를 발송합니다<br>
                            • 고객센터: 010-1234-5678
                        </p>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <button class="btn" onclick="showMainScreen()" style="background: #3B82F6; font-size: 1.1rem; padding: 15px 30px; margin-right: 15px;">🏠 메인으로 돌아가기</button>
                        <button class="btn" onclick="downloadReceipt()" style="background: #3B82F6; font-size: 1.1rem; padding: 15px 30px;">📄 영수증 다운로드</button>
                    </div>
                </div>
            `;
      }

      function getPaymentMethodName() {
        switch (selectedPaymentMethod) {
          case "card":
            return "신용카드";
          case "bank":
            return "계좌이체";
          case "kakao":
            return "카카오페이";
          case "toss":
            return "토스페이";
          default:
            return "결제완료";
        }
      }

      function downloadReceipt() {
        alert("영수증이 다운로드되었습니다! (실제 구현시 PDF 생성)");
      }

      function orderPhotoCard() {
        // 기존 함수 - 사용하지 않음 (proceedToPayment로 대체)
        alert("proceedToPayment 함수를 사용해주세요.");
      }

      // 이벤트 리스너 추가
      document.addEventListener("DOMContentLoaded", function () {
        // 약관 동의 체크박스 이벤트 제거됨 - 결제 방법 선택만으로 활성화

        // 카드 정보 입력 필드 이벤트
        ["card-cvc", "card-password"].forEach((id) => {
          const element = document.getElementById(id);
          if (element) {
            element.addEventListener("input", checkPaymentForm);
          }
        });

        // 계좌이체 정보 입력 필드 이벤트
        ["bank-select", "account-number", "account-holder"].forEach((id) => {
          const element = document.getElementById(id);
          if (element) {
            element.addEventListener("input", checkPaymentForm);
            element.addEventListener("change", checkPaymentForm);
          }
        });
      });

      // 드래그 앤 드롭 기능
      document.addEventListener("DOMContentLoaded", function () {
        const photoUploads = document.querySelectorAll(".photo-upload");

        photoUploads.forEach((upload) => {
          upload.addEventListener("dragover", function (e) {
            e.preventDefault();
            this.classList.add("dragover");
          });

          upload.addEventListener("dragleave", function (e) {
            e.preventDefault();
            this.classList.remove("dragover");
          });

          upload.addEventListener("drop", function (e) {
            e.preventDefault();
            this.classList.remove("dragover");

            const files = e.dataTransfer.files;
            if (this.querySelector("#photo-input")) {
              document.getElementById("photo-input").files = files;
              handlePhotoUpload({ target: { files: files } });
            } else if (this.querySelector("#customer-photo-input")) {
              document.getElementById("customer-photo-input").files = files;
              handleCustomerPhotoUpload({ target: { files: files } });
            }
          });
        });
      });
    </script>
  </body>
</html>
